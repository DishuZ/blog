<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>杂谈 | Zenbu Space</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/blog/assets/img/favicon.ico">
    <meta name="description" content="属于Zenbu的个人博客，持续记录对技术的讲解和梳理学习的知识">
    
    <link rel="preload" href="/blog/assets/css/0.styles.1ccea0a9.css" as="style"><link rel="preload" href="/blog/assets/js/app.04d1c14b.js" as="script"><link rel="preload" href="/blog/assets/js/2.37055818.js" as="script"><link rel="preload" href="/blog/assets/js/30.03c38711.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.8c28c3ea.js"><link rel="prefetch" href="/blog/assets/js/11.89a29c07.js"><link rel="prefetch" href="/blog/assets/js/12.13ede5f4.js"><link rel="prefetch" href="/blog/assets/js/13.d5d0de46.js"><link rel="prefetch" href="/blog/assets/js/14.1e04eecd.js"><link rel="prefetch" href="/blog/assets/js/15.3002afa4.js"><link rel="prefetch" href="/blog/assets/js/16.4c1241e8.js"><link rel="prefetch" href="/blog/assets/js/17.0be426b3.js"><link rel="prefetch" href="/blog/assets/js/18.93db46e0.js"><link rel="prefetch" href="/blog/assets/js/19.741f53ac.js"><link rel="prefetch" href="/blog/assets/js/20.1503f3f0.js"><link rel="prefetch" href="/blog/assets/js/21.505cb8eb.js"><link rel="prefetch" href="/blog/assets/js/22.f76a715d.js"><link rel="prefetch" href="/blog/assets/js/23.5ffa7b6d.js"><link rel="prefetch" href="/blog/assets/js/24.12e44cd3.js"><link rel="prefetch" href="/blog/assets/js/25.54e00b4c.js"><link rel="prefetch" href="/blog/assets/js/26.9fdda262.js"><link rel="prefetch" href="/blog/assets/js/27.c1a06b9a.js"><link rel="prefetch" href="/blog/assets/js/28.37711cbc.js"><link rel="prefetch" href="/blog/assets/js/29.9594dc2d.js"><link rel="prefetch" href="/blog/assets/js/3.22df5610.js"><link rel="prefetch" href="/blog/assets/js/31.c9e6a769.js"><link rel="prefetch" href="/blog/assets/js/32.ec8f742a.js"><link rel="prefetch" href="/blog/assets/js/33.7d1040a5.js"><link rel="prefetch" href="/blog/assets/js/34.39155ca1.js"><link rel="prefetch" href="/blog/assets/js/35.dd26ac2a.js"><link rel="prefetch" href="/blog/assets/js/36.75451d46.js"><link rel="prefetch" href="/blog/assets/js/37.67f68d98.js"><link rel="prefetch" href="/blog/assets/js/38.a2be9b35.js"><link rel="prefetch" href="/blog/assets/js/39.ad81ed6f.js"><link rel="prefetch" href="/blog/assets/js/4.f766401c.js"><link rel="prefetch" href="/blog/assets/js/40.25a142c4.js"><link rel="prefetch" href="/blog/assets/js/41.f23d29a8.js"><link rel="prefetch" href="/blog/assets/js/42.b65084f3.js"><link rel="prefetch" href="/blog/assets/js/43.4984eac1.js"><link rel="prefetch" href="/blog/assets/js/44.bd527c0d.js"><link rel="prefetch" href="/blog/assets/js/45.37c2094d.js"><link rel="prefetch" href="/blog/assets/js/46.34e7bce6.js"><link rel="prefetch" href="/blog/assets/js/47.ddb1f1b5.js"><link rel="prefetch" href="/blog/assets/js/48.d8b50953.js"><link rel="prefetch" href="/blog/assets/js/5.b9444ef6.js"><link rel="prefetch" href="/blog/assets/js/6.bc5ed194.js"><link rel="prefetch" href="/blog/assets/js/7.17928ded.js"><link rel="prefetch" href="/blog/assets/js/8.bf4d5cdf.js"><link rel="prefetch" href="/blog/assets/js/9.023c1000.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.1ccea0a9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container tech-page"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/assets/img/logo.png" alt="Zenbu Space" class="logo"> <span class="site-name can-hide">Zenbu Space</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/blog/about.html" class="nav-link">
  About
</a></div><div class="nav-item"><a href="/blog/cpp/" class="nav-link">
  C++
</a></div><div class="nav-item"><a href="/blog/java/" class="nav-link router-link-active">
  Java
</a></div><div class="nav-item"><a href="/blog/mark_md.html" class="nav-link">
  Markdown
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Liberary Menu" class="dropdown-title"><span class="title">Liberary</span> <span class="arrow down"></span></button> <button type="button" aria-label="Liberary Menu" class="mobile-dropdown-title"><span class="title">Liberary</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/proletarian/" class="nav-link">
  阅读
</a></li><li class="dropdown-item"><!----> <a href="/blog/resource.html" class="nav-link">
  资源
</a></li></ul></div></div> <a href="https://github.com/DishuZ/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/blog/about.html" class="nav-link">
  About
</a></div><div class="nav-item"><a href="/blog/cpp/" class="nav-link">
  C++
</a></div><div class="nav-item"><a href="/blog/java/" class="nav-link router-link-active">
  Java
</a></div><div class="nav-item"><a href="/blog/mark_md.html" class="nav-link">
  Markdown
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Liberary Menu" class="dropdown-title"><span class="title">Liberary</span> <span class="arrow down"></span></button> <button type="button" aria-label="Liberary Menu" class="mobile-dropdown-title"><span class="title">Liberary</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/proletarian/" class="nav-link">
  阅读
</a></li><li class="dropdown-item"><!----> <a href="/blog/resource.html" class="nav-link">
  资源
</a></li></ul></div></div> <a href="https://github.com/DishuZ/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Java</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/java/" aria-current="page" class="sidebar-link">基础</a></li><li><a href="/blog/java/java_project.html" class="sidebar-link">项目</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="杂谈"><a href="#杂谈" class="header-anchor">#</a> 杂谈</h1> <h3 id="基础-三层架构-vs-mvc模式"><a href="#基础-三层架构-vs-mvc模式" class="header-anchor">#</a> 基础 | 三层架构 vs. MVC模式</h3> <p>MVC模式和三层架构几乎是Java开发者每天都要接触的最基础、也是最核心的架构知识了。但总分不清楚两者，接下来就唠唠它们，希望可以更明白一些。</p> <h4 id="mvc模式"><a href="#mvc模式" class="header-anchor">#</a> MVC模式</h4> <p><strong>MVC模式</strong>是软件工程中常见的一种软件架构模式，该模式把软件系统（项目）分为三个基本部分：<strong>模型（Model）、视图（View）和控制器（Controller）。</strong></p> <p>使用MVC模式有很多优势，例如:简化后期对项目的修改、扩展等维护操作；使项目的某一部分变得可以重复利用；使项目的结构更加直观。</p> <p>具体来讲，MVC模式可以将项目划分为模型（M）、视图（V）和控制器（C）三个部分，并赋予各个部分不同的功能，方便开发人员进行分组。</p> <ol><li><strong>视图（View）：</strong> 负责界面的显示，以及与用户的交互功能，例如表单、网页等。</li> <li><strong>控制器（Controller）：</strong> 可以理解为一个分发器，用来决定对于视图发来的请求，需要用哪一个模型来处理，以及处理完后需要跳回到哪一个视图。即用来连接视图和模型。</li></ol> <blockquote><p>实际开发中，通常用控制器对客户端的请求数据进行封装（如将form表单发来的若干个表单字段值，封装到一个实体对象中），然后调用某一个模型来处理此请求，最后再转发请求（或重定向）到视图（或另一个控制器）。</p></blockquote> <ol start="3"><li><strong>模型（Model）：</strong> 模型持有所有的数据、状态和程序逻辑。模型接受视图数据的请求，并返回最终的处理结果。</li></ol> <p>实际开发中，通常用封装数据的JavaBean和封装业务的JavaBean来实现模型层。</p> <p>MVC模式的流程如下：浏览器通过视图向控制器发出请求，控制器接收到请求之后通过选择模型进行处理，处理完请求以后再转发到视图，进行视图界面的渲染并做出最终响应，如图所示。</p> <p>在MVC模式中，视图View可以用JSP/HTML/CSS实现，模型Model可以用JavaBean实现，而控制器Control就可以用Servlet来实现。</p> <p><img src="https://raw.gitmirror.com/DishuZ/PicGo/main/java/202403072318063.webp" alt=""></p> <h4 id="三层架构"><a href="#三层架构" class="header-anchor">#</a> 三层架构</h4> <p><strong>“三层”是指表示层（USL，User Show Layer）、业务逻辑层（BLL，Business Logic Layer）、数据访问层（DAL，Data Access Layer）</strong>，各层的位置如图所示。三层中使用的数据，是通过实体类（封装数据的JavaBean）来传递的。实体类一般放在entity包下。</p> <ol><li><strong>数据访问层（DAL）</strong></li></ol> <p>数据访问层也称为持久层，位于三层中的最下层，用于对数据进行处理。该层中的方法一般都是“原子性”的，即每个方法都不可再分。比如，可以在DAL层中实现数据的增删改查操作，而增、删、改、查四个操作是非常基本的功能，都是不能再拆分的。</p> <p>在程序中，DAL一般写在dao包中，包里面的类名也是以“Dao”结尾，如StudentDao.java、DepartmentDao.java、NewsDao.java等；换句话说，在程序中，DAL是由dao包中的多个“类名Dao.java”组成。每个“类名Dao.java”类，就包含着对该“类名”的所有对象的数据操作，如StudentDao.java中包含对Student对象的增、删、改、查等数据操作，DepartmentDao.java中包含对Department对象的增、删、改、查等数据操作。</p> <ol start="2"><li><strong>业务逻辑层（BLL）</strong></li></ol> <p>位于三层中的中间层（DAL与USL中间），起到了数据交换中承上启下的作用，用于对业务逻辑的封装。BLL的设计对于一个支持可扩展的架构尤为关键，因为它扮演了两个不同的角色。对于DAL而言，它是调用者；对于USL而言，它是被调用者。依赖与被依赖的关系都纠结在BLL上。</p> <p>使用上，就是对DAL中的方法进行“组装”。比如，该层也可以实现对Student对象的增删改查，但与DAL不同的是，BLL中的增、删、改、查不再是 “原子性”的功能，而是包含了一定的业务逻辑。比如该层中的“删”不再像DAL中那样仅仅实现“删”，而是在“删”之前要进行业务逻辑的判断：先查找该学生是否存在（即先执行DAL层的“查”），如果存在才会真正地“删”（再执行DAL层的“删”），如果该学生不存在则应该提示错误信息。即BLL中的“删”，应该是“带逻辑的删”（即先“查”后“删”），也就是对DAL中的“查”和“删”两个方法进行了“组装”。</p> <p>在程序中，BLL一般写在service包（或biz包）中，包里面的类名也是以“Service（或Biz）”结尾，如StudentService.java、DepartmentService.java、NewsService等。换句话说，在程序中，BLL是由service包中的多个“类名Service.java”组成。每个“类名Service.java”类，就包含着对该“类名”的对象的业务操作，如StudentService.java中包含对Student对象的“带逻辑的删”、“带逻辑的增”等业务逻辑操作，DepartmentService.java中包含对所有Department对象的“带逻辑的删”、“带逻辑的增”等业务逻辑操作。</p> <ol start="3"><li><strong>表示层（USL）</strong></li></ol> <p>位于三层中的最上层，用于显示数据和接收用户输入的数据，为用户提供一种交互式操作的界面。USL又分为“USL前台代码”和“USL后台代码”，其中“USL前台代码”是指用户能直接访问到的界面，一般是程序的外观（如html文件、JSP文件等），类似于MVC模式中的“视图”；“USL后台代码”是指用来调用业务逻辑层的JAVA代码（如Servlet），类似于MVC模式中的“控制器”。表示层前台代码一般放在WebContent目录下，而表示层后台代码目前放在servlet包下。</p> <p>MVC模式与三层架构的关系如图所示。</p> <p><img src="https://raw.gitmirror.com/DishuZ/PicGo/main/java/202403072318350.webp" alt=""></p> <p>MVC模式和三层架构，是分别从两个不同的角度去设计的，但目的都是“解耦，分层，代码复用等”。</p> <hr> <h3 id="restful-api"><a href="#restful-api" class="header-anchor">#</a> RESTful API</h3> <p><img src="https://raw.gitmirror.com/DishuZ/PicGo/main/java/202403072318619.png" alt="image.png"></p> <h4 id="概念"><a href="#概念" class="header-anchor">#</a> 概念</h4> <p>REST（全称 Representational State Transfer），中文意思是 _表述/表征性状态转移 _。<strong>如果一个架构符合 REST 的约束条件和原则，我们就称它为 RESTful 架构</strong>。</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>REST 首次出现在 2000 年 Roy Fielding 的博士论文中，Roy Fielding 是 HTTP 规范的主要编写者之一。 他在论文中提到：&quot;我这篇文章的写作目的，就是想在符合架构原理的前提下，理解和评估以网络为基础的应用软件的架构设计，得到一个功能强、性能好、适宜通信的架构。<strong>REST 指的是一组架构约束条件和原则</strong>。&quot;</p></div> <p>REST 本身并没有创造新的技术、组件或服务，而隐藏在 RESTful 背后的理念就是使用 Web 的现有特征和能力， 更好地使用现有 Web 标准中的一些准则和约束。</p> <p>理论上 REST 架构风格并不是绑定在 HTTP 上，只不过目前 HTTP 是唯一与 REST 相关的实例。 所以我们这里描述的 REST 也是通过 HTTP 实现的 REST。</p> <p><strong>RESTful 架构原则：</strong></p> <ul><li>对网络上所有的资源都有一个资源标志符。</li> <li>对资源的操作不会改变标识符。</li> <li>同一资源有多种表现形式（xml、json）</li> <li>所有操作都是无状态的（Stateless）</li></ul> <blockquote><p>什么是无状态性？
使得客户端和服务器端不必保存对方的详细信息，服务器只需要处理当前的请求，不需了解请求的历史。可以更容易的释放资源，让服务器利用Pool（连接池）技术来提高稳定性和性能。</p></blockquote> <p>RESTful 架构的核心规范与约束：<strong>统一接口</strong>。</p> <h4 id="理解-restful"><a href="#理解-restful" class="header-anchor">#</a> 理解 RESTful</h4> <p>要理解 RESTful 架构，需要理解 Representational State Transfer 这个词组到底是什么意思，它的每一个词都有些什么涵义。</p> <p>下面我们结合 REST 原则，围绕资源展开讨论，从资源的定义、获取、表述、关联、状态变迁等角度，列举一些关键概念并加以解释。</p> <h5 id="_1-资源与uri"><a href="#_1-资源与uri" class="header-anchor">#</a> 1）资源与URI</h5> <p>REST 全称是 <em>表述性状态转移</em>，那<strong>究竟指的是什么的表述? <strong>其实指的就是</strong>资源</strong>。任何事物，只要有被引用到的必要，它就是一个资源。资源可以是实体（例如手机号码），也可以只是一个抽象概念（例如价值）。</p> <p>要让一个资源可以被识别，需要有个唯一标识，在 Web 中这个唯一标识就是URI（Uniform Resource Identifier）。</p> <p>URI 既可以看成是资源的地址，也可以看成是资源的名称。如果某些信息没有使用 URI 来表示，那它就不能算是一个资源， 只能算是资源的一些信息而已。URI 的设计应该遵循可寻址性原则，具有自描述性，需要在形式上给人以直觉上的关联。</p> <h5 id="_2-统一资源接口"><a href="#_2-统一资源接口" class="header-anchor">#</a> 2）统一资源接口</h5> <p>RESTful 架构应该遵循统一接口原则，统一接口包含了一组受限的预定义的操作，不论什么样的资源，都是通过使用相同的接口进行资源的访问。接口应该使用标准的 HTTP 方法如 GET，PUT 和 POST，并遵循这些方法的语义。</p> <p>如果按照 HTTP 方法的语义来暴露资源，那么接口将会拥有安全性和幂等性的特性，例如 GET 和 HEAD 请求都是安全的， 无论请求多少次，都不会改变服务器状态。而 GET、HEAD、PUT 和 DELETE 请求都是幂等的，无论对资源操作多少次， 结果总是一样的，后面的请求并不会产生比第一次更多的影响。</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>RESTful 状态码：</p> <hr> <p><strong>GET</strong></p> <p>安全且幂等</p> <p>获取表示</p> <p>变更时获取表示（缓存）</p> <p>200（OK） - 表示已在响应中发出</p> <p>204（无内容） - 资源有空表示</p> <p>301（Moved Permanently） - 资源的URI已被更新</p> <p>303（See Other） - 其他（如，负载均衡）</p> <p>304（not modified）- 资源未更改（缓存）</p> <p>400 （bad request）- 指代坏请求（如，参数错误）</p> <p>404 （not found）- 资源不存在</p> <p>406 （not acceptable）- 服务端不支持所需表示</p> <p>500 （internal server error）- 通用错误响应</p> <p>503 （Service Unavailable）- 服务端当前无法处理请求</p> <hr> <p><strong>POST</strong></p> <p>不安全且不幂等</p> <p>使用服务端管理的（自动产生）的实例号创建资源</p> <p>创建子资源</p> <p>部分更新资源</p> <p>如果没有被修改，则不过更新资源（乐观锁）</p> <p>200（OK）- 如果现有资源已被更改</p> <p>201（created）- 如果新资源被创建</p> <p>202（accepted）- 已接受处理请求但尚未完成（异步处理）</p> <p>301（Moved Permanently）- 资源的URI被更新</p> <p>303（See Other）- 其他（如，负载均衡）</p> <p>400（bad request）- 指代坏请求</p> <p>404 （not found）- 资源不存在</p> <p>406 （not acceptable）- 服务端不支持所需表示</p> <p>409 （conflict）- 通用冲突</p> <p>412 （Precondition Failed）- 前置条件失败（如执行条件更新时的冲突）</p> <p>415 （unsupported media type）- 接受到的表示不受支持</p> <p>500 （internal server error）- 通用错误响应</p> <p>503 （Service Unavailable）- 服务当前无法处理请求</p> <hr> <p><strong>PUT</strong></p> <p>不安全但幂等</p> <p>用客户端管理的实例号创建一个资源</p> <p>通过替换的方式更新资源</p> <p>如果未被修改，则更新资源（乐观锁）</p> <p>200 （OK）- 如果已存在资源被更改</p> <p>201 （created）- 如果新资源被创建</p> <p>301（Moved Permanently）- 资源的URI已更改</p> <p>303 （See Other）- 其他（如，负载均衡）</p> <p>400 （bad request）- 指代坏请求</p> <p>404 （not found）- 资源不存在</p> <p>406 （not acceptable）- 服务端不支持所需表示</p> <p>409 （conflict）- 通用冲突</p> <p>412 （Precondition Failed）- 前置条件失败（如执行条件更新时的冲突）</p> <p>415 （unsupported media type）- 接受到的表示不受支持</p> <p>500 （internal server error）- 通用错误响应</p> <p>503 （Service Unavailable）- 服务当前无法处理请求</p> <hr> <p><strong>DELETE</strong></p> <p>不安全但幂等</p> <p>删除资源</p> <p>200 （OK）- 资源已被删除</p> <p>301 （Moved Permanently）- 资源的URI已更改</p> <p>303 （See Other）- 其他，如负载均衡</p> <p>400 （bad request）- 指代坏请求</p> <p>404 （not found）- 资源不存在</p> <p>409 （conflict）- 通用冲突</p> <p>500 （internal server error）- 通用错误响应</p> <p>503 （Service Unavailable）- 服务端当前无法处理请求</p></div> <h5 id="_3-资源的表述"><a href="#_3-资源的表述" class="header-anchor">#</a> 3）资源的表述</h5> <p>上面提到，客户端通过 HTTP 方法可以获取资源，是吧？确切的说，客户端获取的只是<strong>资源的表述</strong>而已。 资源在外界的具体呈现，可以有多种表述（或称为表现、表示）形式，在客户端和服务端之间传送的也是资源的表述，而不是资源本身。 例如文本资源可以采用 html、xml、json 等格式，图片可以使用 PNG 或 JPG 展现出来。</p> <p>资源的表述包括数据和描述数据的元数据，例如，HTTP 头 &quot;Content-Type&quot; 就是这样一个元数据属性。</p> <p>那么客户端如何知道服务端提供哪种表述形式呢？可以通过 HTTP 内容协商，客户端可以通过 <code>Accept</code> 头告诉服务器要请求一种特定格式的表述，服务端则通过 <code>Content-Type</code> 告诉客户端资源的表述形式。</p> <h5 id="_4-资源的链接"><a href="#_4-资源的链接" class="header-anchor">#</a> 4）资源的链接</h5> <p>我们知道 REST 是使用标准的 HTTP 方法来操作资源的，但仅仅因此就理解成带 CURD 的 Web 数据库架构就太过于简单了。</p> <p>这种反模式忽略了一个核心概念：&quot;超媒体即应用状态引擎（hypermedia as the engine of application state）&quot;。 超媒体是什么?</p> <p>当你浏览 Web 网页时，从一个连接跳到一个页面，再从另一个连接跳到另外一个页面，就是利用了超媒体的概念：把一个个资源链接起来。</p> <p>要达到这个目的，就要求在表述格式里边加入链接来引导客户端。在《RESTful Web Services》一书中，作者把这种具有链接的特性成为连通性。</p> <p>下面我们具体来看一些例子。</p> <p>例子1，下面展示的是 Github 获取某个组织下的项目列表的请求，可以看到在响应头里边增加 Link 头告诉客户端怎么访问下一页和最后一页的记录。 而在响应体里边，用 url 来链接项目所有者和项目地址。</p> <p><img src="https://raw.gitmirror.com/DishuZ/PicGo/main/java/202403072318085.png" alt="image.png"></p> <p>例子2，又例如下面这个，创建订单后通过链接引导客户端如何去付款。</p> <p><img src="https://raw.gitmirror.com/DishuZ/PicGo/main/java/202403072319062.png" alt="image.png"></p> <p>上面的例子展示了如何使用超媒体来增强资源的连通性。很多人在设计 RESTful 架构时，使用很多时间来寻找漂亮的URI，而忽略了超媒体。所以，应该多花一些时间来给资源的表述提供链接，而不是专注于&quot;资源的CRUD&quot;。</p> <h5 id="_5-状态的转移"><a href="#_5-状态的转移" class="header-anchor">#</a> 5）状态的转移</h5> <p>有了上面的铺垫，再讨论 REST 里边的状态转移就会很容易理解了。不过，我们先来讨论一下 REST 原则中的无状态通信原则。</p> <p>初看一下，好像自相矛盾了，既然无状态，何来状态转移一说？</p> <p>其实，这里说的<strong>无状态通信原则，并不是说客户端应用不能有状态，而是指服务端不应该保存客户端状态</strong>。</p> <p><strong>应用状态与资源状态</strong>：</p> <p>实际上，<strong>状态应该区分应用状态和资源状态</strong>，客户端负责维护应用状态，而服务端维护资源状态。客户端与服务端的交互必须是无状态的，并在每一次请求中包含处理该请求所需的一切信息。</p> <p>服务端不需要在请求间保留应用状态，只有在接受到实际请求的时候，服务端才会关注应用状态。这种无状态通信原则，使得服务端和中介能够理解独立的请求和响应。</p> <p>在多次请求中，同一客户端也不再需要依赖于同一服务器，方便实现高可扩展和高可用性的服务端。</p> <p>但有时候我们会做出违反无状态通信原则的设计，例如利用Cookie跟踪某个服务端会话状态，常见的像J2EE里边的JSESSIONID。这意味着，浏览器随各次请求发出去的Cookie是被用于构建会话状态的。</p> <p>当然，如果Cookie保存的是一些服务器不依赖于会话状态即可验证的信息（比如认证令牌），这样的Cookie也是符合REST原则的。</p> <p><strong>应用状态的转移</strong>：</p> <p>状态转移到这里已经很好理解了， &quot;会话&quot;状态不是作为资源状态保存在服务端的，而是被客户端作为应用状态进行跟踪的。客户端应用状态在服务端提供的超媒体的指引下发生变迁。服务端通过超媒体告诉客户端当前状态有哪些后续状态可以进入。</p> <p>这些类似&quot;下一页&quot;之类的链接起的就是这种推进状态的作用——指引你如何从当前状态进入下一个可能的状态。</p> <h4 id="参考"><a href="#参考" class="header-anchor">#</a> 参考</h4> <ul><li><a href="https://www.cnblogs.com/zhangruifeng/p/13257731.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/zhangruifeng/p/13257731.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zhuanlan.zhihu.com/p/334809573" target="_blank" rel="noopener noreferrer">https://zhuanlan.zhihu.com/p/334809573<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/blog/assets/js/app.04d1c14b.js" defer></script><script src="/blog/assets/js/2.37055818.js" defer></script><script src="/blog/assets/js/30.03c38711.js" defer></script>
  </body>
</html>
