<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>前注 | Zenbu Space</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/blog/assets/img/favicon.ico">
    <meta name="description" content="属于Zenbu的个人博客，持续记录对技术的讲解和梳理学习的知识">
    
    <link rel="preload" href="/blog/assets/css/0.styles.1ccea0a9.css" as="style"><link rel="preload" href="/blog/assets/js/app.04d1c14b.js" as="script"><link rel="preload" href="/blog/assets/js/2.37055818.js" as="script"><link rel="preload" href="/blog/assets/js/29.9594dc2d.js" as="script"><link rel="preload" href="/blog/assets/js/3.22df5610.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.8c28c3ea.js"><link rel="prefetch" href="/blog/assets/js/11.89a29c07.js"><link rel="prefetch" href="/blog/assets/js/12.13ede5f4.js"><link rel="prefetch" href="/blog/assets/js/13.d5d0de46.js"><link rel="prefetch" href="/blog/assets/js/14.1e04eecd.js"><link rel="prefetch" href="/blog/assets/js/15.3002afa4.js"><link rel="prefetch" href="/blog/assets/js/16.4c1241e8.js"><link rel="prefetch" href="/blog/assets/js/17.0be426b3.js"><link rel="prefetch" href="/blog/assets/js/18.93db46e0.js"><link rel="prefetch" href="/blog/assets/js/19.741f53ac.js"><link rel="prefetch" href="/blog/assets/js/20.1503f3f0.js"><link rel="prefetch" href="/blog/assets/js/21.505cb8eb.js"><link rel="prefetch" href="/blog/assets/js/22.f76a715d.js"><link rel="prefetch" href="/blog/assets/js/23.5ffa7b6d.js"><link rel="prefetch" href="/blog/assets/js/24.12e44cd3.js"><link rel="prefetch" href="/blog/assets/js/25.54e00b4c.js"><link rel="prefetch" href="/blog/assets/js/26.9fdda262.js"><link rel="prefetch" href="/blog/assets/js/27.c1a06b9a.js"><link rel="prefetch" href="/blog/assets/js/28.37711cbc.js"><link rel="prefetch" href="/blog/assets/js/30.03c38711.js"><link rel="prefetch" href="/blog/assets/js/31.c9e6a769.js"><link rel="prefetch" href="/blog/assets/js/32.ec8f742a.js"><link rel="prefetch" href="/blog/assets/js/33.7d1040a5.js"><link rel="prefetch" href="/blog/assets/js/34.39155ca1.js"><link rel="prefetch" href="/blog/assets/js/35.dd26ac2a.js"><link rel="prefetch" href="/blog/assets/js/36.75451d46.js"><link rel="prefetch" href="/blog/assets/js/37.67f68d98.js"><link rel="prefetch" href="/blog/assets/js/38.a2be9b35.js"><link rel="prefetch" href="/blog/assets/js/39.ad81ed6f.js"><link rel="prefetch" href="/blog/assets/js/4.f766401c.js"><link rel="prefetch" href="/blog/assets/js/40.25a142c4.js"><link rel="prefetch" href="/blog/assets/js/41.f23d29a8.js"><link rel="prefetch" href="/blog/assets/js/42.b65084f3.js"><link rel="prefetch" href="/blog/assets/js/43.4984eac1.js"><link rel="prefetch" href="/blog/assets/js/44.bd527c0d.js"><link rel="prefetch" href="/blog/assets/js/45.37c2094d.js"><link rel="prefetch" href="/blog/assets/js/46.34e7bce6.js"><link rel="prefetch" href="/blog/assets/js/47.ddb1f1b5.js"><link rel="prefetch" href="/blog/assets/js/48.d8b50953.js"><link rel="prefetch" href="/blog/assets/js/5.b9444ef6.js"><link rel="prefetch" href="/blog/assets/js/6.bc5ed194.js"><link rel="prefetch" href="/blog/assets/js/7.17928ded.js"><link rel="prefetch" href="/blog/assets/js/8.bf4d5cdf.js"><link rel="prefetch" href="/blog/assets/js/9.023c1000.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.1ccea0a9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container tech-page"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/assets/img/logo.png" alt="Zenbu Space" class="logo"> <span class="site-name can-hide">Zenbu Space</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/blog/about.html" class="nav-link">
  About
</a></div><div class="nav-item"><a href="/blog/cpp/" class="nav-link">
  C++
</a></div><div class="nav-item"><a href="/blog/java/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Java
</a></div><div class="nav-item"><a href="/blog/mark_md.html" class="nav-link">
  Markdown
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Liberary Menu" class="dropdown-title"><span class="title">Liberary</span> <span class="arrow down"></span></button> <button type="button" aria-label="Liberary Menu" class="mobile-dropdown-title"><span class="title">Liberary</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/proletarian/" class="nav-link">
  阅读
</a></li><li class="dropdown-item"><!----> <a href="/blog/resource.html" class="nav-link">
  资源
</a></li></ul></div></div> <a href="https://github.com/DishuZ/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/blog/about.html" class="nav-link">
  About
</a></div><div class="nav-item"><a href="/blog/cpp/" class="nav-link">
  C++
</a></div><div class="nav-item"><a href="/blog/java/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Java
</a></div><div class="nav-item"><a href="/blog/mark_md.html" class="nav-link">
  Markdown
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Liberary Menu" class="dropdown-title"><span class="title">Liberary</span> <span class="arrow down"></span></button> <button type="button" aria-label="Liberary Menu" class="mobile-dropdown-title"><span class="title">Liberary</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/proletarian/" class="nav-link">
  阅读
</a></li><li class="dropdown-item"><!----> <a href="/blog/resource.html" class="nav-link">
  资源
</a></li></ul></div></div> <a href="https://github.com/DishuZ/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Java</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/java/" aria-current="page" class="active sidebar-link">基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/java/#安装-java" class="sidebar-link">安装 Java</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/java/#_1-下载安装包" class="sidebar-link">1）下载安装包</a></li><li class="sidebar-sub-header"><a href="/blog/java/#_2-安装" class="sidebar-link">2）安装</a></li><li class="sidebar-sub-header"><a href="/blog/java/#_3-验证是否安装成功" class="sidebar-link">3）验证是否安装成功</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/java/#前置知识" class="sidebar-link">前置知识</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/java/#java-和-javac" class="sidebar-link">java 和 javac</a></li><li class="sidebar-sub-header"><a href="/blog/java/#java-程序开发三部曲" class="sidebar-link">java 程序开发三部曲</a></li><li class="sidebar-sub-header"><a href="/blog/java/#jdk-组成" class="sidebar-link">JDK 组成</a></li><li class="sidebar-sub-header"><a href="/blog/java/#环境变量" class="sidebar-link">环境变量</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/java/#安装-java-集成开发环境-idea" class="sidebar-link">安装 Java 集成开发环境 — IDEA</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/java/#下载和安装" class="sidebar-link">下载和安装</a></li><li class="sidebar-sub-header"><a href="/blog/java/#管理-java-程序的结构" class="sidebar-link">管理 Java 程序的结构</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/java/#java-各数据类型的存储原理" class="sidebar-link">Java 各数据类型的存储原理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/java/#数组的存储和执行" class="sidebar-link">数组的存储和执行</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/java/#基本数据类型" class="sidebar-link">基本数据类型</a></li><li class="sidebar-sub-header"><a href="/blog/java/#类和对象" class="sidebar-link">类和对象</a></li><li class="sidebar-sub-header"><a href="/blog/java/#java-集合概述" class="sidebar-link">Java 集合概述</a></li><li class="sidebar-sub-header"><a href="/blog/java/#collection-和-iterator-接口" class="sidebar-link">Collection 和 Iterator 接口</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/java/#使用-lambda-表达式遍历集合" class="sidebar-link">使用 Lambda 表达式遍历集合</a></li><li class="sidebar-sub-header"><a href="/blog/java/#使用-java-8-增强的-iterator-遍历集合元素" class="sidebar-link">使用 Java 8 增强的 Iterator 遍历集合元素</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/java/#set-集合" class="sidebar-link">Set 集合</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/java/#hashset-类" class="sidebar-link">HashSet 类</a></li><li class="sidebar-sub-header"><a href="/blog/java/#treeset-类" class="sidebar-link">TreeSet 类</a></li><li class="sidebar-sub-header"><a href="/blog/java/#各-set-实现类的性能分析" class="sidebar-link">各 Set 实现类的性能分析</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/java/#基本注解" class="sidebar-link">基本注解</a></li></ul></li><li><a href="/blog/java/java_project.html" class="sidebar-link">项目</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><div><div><ul id="tag-ul"><li><span>Java</span></li><li><span>编程</span></li></ul></div></div> <hr> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>记录Java学习过程中的困惑之处 📖</p></div> <h1 id="概述"><a href="#概述" class="header-anchor">#</a> 概述</h1> <h2 id="安装-java"><a href="#安装-java" class="header-anchor">#</a> 安装 Java</h2> <h3 id="_1-下载安装包"><a href="#_1-下载安装包" class="header-anchor">#</a> 1）下载安装包</h3> <p>进入 ORACLE 官网：<a href="https://www.oracle.com/" target="_blank" rel="noopener noreferrer">https://www.oracle.com/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ，点击顶部导航栏的 Products ，找到 Java （位于左下角），就到了 Java 介绍界面。
接着右上角的 Download Java，选择合适的版本（企业开发一般用 JDK 8，学习可安装 JDK 17）下载即可。</p> <p><img src="https://raw.gitmirror.com/DishuZ/PicGo/main/java_pri_sky/202402282149708.png" alt="图1.1 直达网址：https://www.oracle.com/java/technologies/downloads/#jdk17-windows"></p> <p><em>本人安装的是 JDK 17 ，并且放在 java 文件夹下。</em></p> <h3 id="_2-安装"><a href="#_2-安装" class="header-anchor">#</a> 2）安装</h3> <p>这一步按照指示操作即可，有一点需要注意，在选择安装路径的时候，<strong>路径必须不能是中文或者出现空格</strong>，否则后续可能触发一系列莫名其妙的 bug。</p> <h3 id="_3-验证是否安装成功"><a href="#_3-验证是否安装成功" class="header-anchor">#</a> 3）验证是否安装成功</h3> <p>打开终端/cmd，输入 java 和 javac 命令，若出现以下内容，便是安装成功。</p> <p><img src="https://raw.gitmirror.com/DishuZ/PicGo/main/java_pri_sky/202402282150297.png" alt="图1.2 验证 java"></p> <p><img src="https://raw.gitmirror.com/DishuZ/PicGo/main/java_pri_sky/202402282150179.png" alt="图1.3 验证 javac"></p> <p><img src="https://raw.gitmirror.com/DishuZ/PicGo/main/java_pri_sky/202402282150352.png" alt="图1.4 查看安装的版本"></p> <p><img src="https://raw.gitmirror.com/DishuZ/PicGo/main/java/202402282151185.png" alt="图1.5 查看 java 的来源：位于 java 下的 bin 目录"></p> <h2 id="前置知识"><a href="#前置知识" class="header-anchor">#</a> 前置知识</h2> <h3 id="java-和-javac"><a href="#java-和-javac" class="header-anchor">#</a> java 和 javac</h3> <p>了解JDK中的 Java、Javac 的基本作用：<code>**javac.exe**</code><strong>是编译工具，</strong><code>**java.exe**</code>** 是执行工具**。</p> <p>说明：将来我们写好的 Java 程序都是高级语言，计算机底层是硬件不能识别这些语言，必须先通过 Javac 编译工具进行翻译，然后再通过 Java 执行工具执行才可以驱动机器干活。</p> <h3 id="java-程序开发三部曲"><a href="#java-程序开发三部曲" class="header-anchor">#</a> java 程序开发三部曲</h3> <p><img src="https://raw.gitmirror.com/DishuZ/PicGo/main/java/202402282151695.png" alt="图1.6 java 开发三部曲示意图"></p> <p>Notes：</p> <ul><li>建议代码文件名全英文，首字母大写，满足驼峰模式，源代码文件的后缀必须是 <code>.java</code></li> <li>文件名称必须与代码中的类名称一致，比如文件名为 <code>Hello.java</code>，那么文件里的类就必须是 <code>public class Hello { ... }</code></li> <li>编译：<code>javac Hello.java</code>，执行：<code>java Hello</code>。（特殊地，JDK 11 开始支持 <code>java</code> 命令直接执行，如 <code>java Hello.java</code>）</li> <li>BUG —— 创始人：格蕾丝.赫伯</li></ul> <h3 id="jdk-组成"><a href="#jdk-组成" class="header-anchor">#</a> JDK 组成</h3> <p><img src="https://raw.gitmirror.com/DishuZ/PicGo/main/java/202402282151599.png" alt="图1.7 JDK 组成成分"></p> <p>图中，<code>javac</code> 命令负责将程序员编写的 java 文件编译成字节码文件 <code>.class</code>，接着 JVM 负责运行 <code>.class</code>，而运行过程中用到了核心类库提供的便捷接口。</p> <p>Java 程序的内存分配和回收都是由 JRE 在后台自动进行的，JRE 会负责回收那些不再使用的内容，这种机制被称为 <strong>垃圾回收（Garbage Collection, GC）</strong>，垃圾回收是一种动态存储管理技术。</p> <h3 id="环境变量"><a href="#环境变量" class="header-anchor">#</a> 环境变量</h3> <p>Path 环境变量：用于记住程序路径，方便在 终端/cmd 的任意目录启动程序。</p> <p>JAVA_HOME 环境变量：告诉操作系统JDK安装在了哪个位置（将来其他技术要通过这个环境变量找JDK）</p> <p><em>以前的老版本的JDK在安装的是没有自动配置Path环境变量的，此时必需要自己配置Path环境变量。</em></p> <p><em>较新版本的JDK只是自动配置了Path，没有自动配置JAVA_HOME。</em></p> <h2 id="安装-java-集成开发环境-idea"><a href="#安装-java-集成开发环境-idea" class="header-anchor">#</a> 安装 Java 集成开发环境 — IDEA</h2> <h3 id="下载和安装"><a href="#下载和安装" class="header-anchor">#</a> 下载和安装</h3> <ol><li>IDE, Integrated Development Environment</li></ol> <p>把代码编写，编译，执行等多种功能综合到一起的开发工具，可以进行代码智能提示，错误提醒，项目管理等等。常见的 Java  IDE 工具有：Eclipse、MyEclipse、<strong>IntelliJ IDEA</strong>、Jbuilder、NetBeans等。</p> <ol start="2"><li>下载 &amp; 安装 IDEA</li></ol> <p>下载链接：<a href="https://www.jetbrains.com/idea/" target="_blank" rel="noopener noreferrer">https://www.jetbrains.com/idea/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>安装方式：基本上是傻瓜式安装，建议修改安装路径（不要安装在有空格和中文的路径下）。</p> <p><img src="https://raw.gitmirror.com/DishuZ/PicGo/main/java/202402282151067.png" alt="图1.8 IDEA 快捷键"></p> <h3 id="管理-java-程序的结构"><a href="#管理-java-程序的结构" class="header-anchor">#</a> 管理 Java 程序的结构</h3> <p>为了便于管理项目代码，将 Java 程序划分以下四类：</p> <ul><li><strong>project</strong>    项目/工程</li> <li><strong>module</strong>   模块</li> <li><strong>package</strong>  包</li> <li><strong>class</strong>        类</li></ul> <p>示例：</p> <p><img src="https://raw.gitmirror.com/DishuZ/PicGo/main/java/202402282151122.png" alt="image.png"></p> <h2 id="java-各数据类型的存储原理"><a href="#java-各数据类型的存储原理" class="header-anchor">#</a> Java 各数据类型的存储原理</h2> <p>程序都是在计算机中的内存中执行的，Java 编译后会生成 <code>.class</code>文件，然后把这个文件提取到正在运行的 JVM 中执行。</p> <p>Java 内存分配：方法区 + 栈 + 堆</p> <p><img src="https://raw.gitmirror.com/DishuZ/PicGo/main/java/202402282152858.png" alt="图1.9 Java 内存的三个分区"></p> <h3 id="数组的存储和执行"><a href="#数组的存储和执行" class="header-anchor">#</a> 数组的存储和执行</h3> <p><img src="https://raw.gitmirror.com/DishuZ/PicGo/main/java/202402282152179.png" alt="图1.10 基本类型数据的值直接存储在栈内存；数组的元素值存储在堆内存连续的空间中，把该连续空间的首地址存储在栈内存中"></p> <h1 id="数据类型和运算符"><a href="#数据类型和运算符" class="header-anchor">#</a> 数据类型和运算符</h1> <h2 id="基本数据类型"><a href="#基本数据类型" class="header-anchor">#</a> 基本数据类型</h2> <p>我们常把 Java 里的基本数据类型分为 4 类：1）整数类型；2）字符类型；3）浮点类型；4）布尔类型。</p> <p>值得注意的是，字符串不是基本数据类型，字符串是一个类，是一个引用数据类型。</p> <details class="custom-block details"><summary>提问：为什么有栈内存和堆内存之分？</summary> <p><strong>当一个方法执行时，每个方法都会建立自己的内存栈</strong> ，在这个方法内定义的变量将会逐个放入这块栈内存里， <strong>随着方法的执行结束，这个方法的内存栈也将自然销毁</strong> 。因此，所有在方法中定义的局部变量都是放在栈内存中的；</p> <p><strong>在程序中创建一个对象时，这个对象将被保存在运行的数据区中</strong> ，以便反复利用（因为对象的创建成本通常较大）， <strong>这个运行时数据区就是堆内存</strong> 。堆内存中的对象不会随方法的结束而销毁，即使方法结束后，这个对象还可能被另一个引用变量所引用（在方法的参数传递时很常见），则这个对象依然不会被销毁。只有当一个对象没有任何引用变量引用它时，系统的垃圾回收器才会在合适的时候回收它。</p></details> <h1 id="面向对象"><a href="#面向对象" class="header-anchor">#</a> 面向对象</h1> <p>Java 是面向对象的程序设计语言，提供了定义类、成员变量、方法等最基本的功能。Java 拥有面向对象的三大特征：封装、继承和多态。</p> <ul><li><strong>封装</strong> — Java 提供了 <code>private</code>、<code>protected</code>、<code>public</code> 三个访问控制修饰符来实现良好的封装</li> <li><strong>继承</strong> — Java 提供了 <code>extends</code> 关键字来让子类继承父类，子类继承父类就可以继承到父类的的成员变量和方法，如果访问控制允许，子类实例可以直接调用父类里定义的方法。 <strong>继承是实现类复用的重要手段</strong> 。</li> <li><strong>多态</strong> — 使用继承关系来实现复用时，子类对象可以直接赋给父类变量，这个变量具有多态性，编程更加灵活。</li></ul> <h2 id="类和对象"><a href="#类和对象" class="header-anchor">#</a> 类和对象</h2> <p>类是面向对象的重要内容。在前面，我们已经知道类可以分为基本数据类型和引用类型，那么在这里，可以把类当成一种自定义的引用类型。因此可以使用类来定义变量（如 <code>User u = new User(...);</code>），这里的 <code>User</code> 是自定义的类，变量 <code>u</code> 就是引用类型。</p> <p>定义类的简单语法如下：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token punctuation">[</span>修饰符<span class="token punctuation">]</span> <span class="token keyword">class</span> 类名
<span class="token punctuation">{</span>
  构造器
  成员变量
  方法
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>修饰符可以是 <code>public</code>、<code>final</code>、<code>abstract</code>，或者完全省略这三个修饰符。需要指出的是，<code>static</code> 修饰的成员不能访问没有 <code>static</code> 修饰的成员。定义好类之后，在其他地方可以通过 <code>new</code> 关键字来调用构造器，从而返回该类的实例。</p> <h1 id="java-基础类库"><a href="#java-基础类库" class="header-anchor">#</a> Java 基础类库</h1> <p>Java 提供了 <code>String</code> 、 <code>StringBuffer</code> 和 <code>StringBuilder</code> 来处理字符串，还提供了 <code>Date</code> 和 <code>Calendar</code> 来处理日期、时间，其中 <code>Date</code> 是一个已经过时的 API ，通常推荐使用 <code>Calendar</code> 来处理日期和时间。从 JDK 1.4 以后，Jave 也增加了对正则表达式的支持。</p> <h1 id="java-集合"><a href="#java-集合" class="header-anchor">#</a> Java 集合</h1> <h2 id="java-集合概述"><a href="#java-集合概述" class="header-anchor">#</a> Java 集合概述</h2> <p>为了保存数量不确定的数据，以及保存具有映射关系的数据（也被称为关联数组），Java 提供了 <strong>集合类</strong> 。集合类主要负责保存、盛装其他数据，因此集合类也称为 <strong>容器类</strong> 。所有的集合类都位于 <code>java.util</code> 包下，后来为了处理多线程环境下的并发安全问题， Java 5 还在 <code>java.util.concurrent</code> 包下提供了一些多线程支持的集合类。</p> <p>Java 的集合类主要由两个接口派生而出： <code>Collection</code> 和 <code>Map</code> ，<code>Collection</code> 和 <code>Map</code> 是 Java 集合框架的根接口，这两个接口又包含了一些子接口和实现类。</p> <p>对于 <code>Set</code> 、 <code>List</code> 、 <code>Queue</code> 、 <code>Map</code> 四种集合，最常用的实现类分别是 <code>HashSet</code> 、 <code>TreeSet</code> 、 <code>ArrayList</code> 、 <code>ArrayDeque</code> 、 <code>LinkedList</code> 和 <code>HashMap</code> 、 <code>TreeMap</code> 等实现类。</p> <h2 id="collection-和-iterator-接口"><a href="#collection-和-iterator-接口" class="header-anchor">#</a> Collection 和 Iterator 接口</h2> <p><code>Collection</code> 接口是 <code>List</code> 、 <code>Set</code> 和 <code>Queue</code> 接口的父接口，该接口里定义的方法既可用于操作 <code>Set</code> 集合，也可用于操作 <code>List</code> 和 <code>Queue</code> 集合。 <code>Collection</code> 接口里定义了如下操作集合元素的方法：</p> <table><thead><tr><th>方法</th> <th>解释</th></tr></thead> <tbody><tr><td><code>boolean add(Object o)</code></td> <td>该方法把集合 <code>c</code> 里的所有元素添加到指定集合里。如果集合对象被添加操作改变了，则返回 <code>true</code></td></tr> <tr><td><code>boolean addAll(Collection c)</code></td> <td>该方法把集合 <code>c</code> 里的所有元素添加到指定集合里。如果集合对象被添加操作改变了，则返回 <code>true</code></td></tr> <tr><td><code>boolean contains(Object o)</code></td> <td>返回集合里是否包含指定元素</td></tr> <tr><td><code>Iterator iterator()</code></td> <td>返回一个 <code>Iterator</code> 对象，用于遍历集合里的元素</td></tr> <tr><td><code>boolean remove(Object o)</code></td> <td>删除集合中的指定元素 <code>o</code> ，当集合中包含了一个或多个元素 <code>o</code> 时，该方法只删除第一个符合条件的元素，该方法将返回 <code>true</code></td></tr> <tr><td><code>boolean retainAll(Collection c)</code></td> <td>从集合中删除集合 <code>c</code> 里不包含的元素（当相遇把调用该方法的集合变成该集合和集合 <code>c</code> 的交集），如果该操作改变了调用该方法的集合，则该方法返回 <code>true</code></td></tr> <tr><td><code>Object[] toArray()</code></td> <td>把集合转换成一个数组，所有的集合元素变成对应的数据元素</td></tr> <tr><td><code>int size()</code></td> <td>返回集合里元素的个数</td></tr></tbody></table> <h3 id="使用-lambda-表达式遍历集合"><a href="#使用-lambda-表达式遍历集合" class="header-anchor">#</a> 使用 Lambda 表达式遍历集合</h3> <p>Java 8 为 Iterable 接口新增了一个 <code>forEach(Consumer action)</code> 默认方法，该方法所需参数的类型是一个函数式接口，而 <code>Iterable</code> 接口是 <code>Collection</code> 接口的父接口，因此 <code>Collection</code> 集合也可直接调用该方法。</p> <p>当程序调用 <code>Iterable</code> 的 <code>forEach</code> 遍历集合元素时，程序会一次将集合元素传给 <code>Consumer</code> 的 <code>accept(T t)</code> 方法。正因为 <code>Consumer</code> 是函数式接口，因此可以使用 Lambda 表达式来遍历集合元素。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CollectionEach</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 创建一个集合</span>
    <span class="token class-name">Collection</span> books <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    books<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    books<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    books<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;c&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 调用 forEach() 方法遍历集合</span>
    <span class="token comment">// forEach() 会自动将集合元素逐个传给 Lambda 表达式的形参 obj</span>
    books<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>obj <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="使用-java-8-增强的-iterator-遍历集合元素"><a href="#使用-java-8-增强的-iterator-遍历集合元素" class="header-anchor">#</a> 使用 Java 8 增强的 Iterator 遍历集合元素</h3> <p><code>Iterator</code> 接口也是 Java 集合框架的成员，但它与 <code>Collection</code> 系列、 <code>Map</code> 系列的集合不一样： <code>Collection</code> 和 <code>Map</code> 系列主要用于盛装其他对象，而 <code>Iterator</code> 则主要用于遍历（即迭代访问） <code>Collection</code> 集合中的元素， <code>Iterator</code> 对象也称为 <strong>迭代器</strong> 。</p> <p><code>Iterator</code> 接口隐藏了各种 <code>Collection</code> 实现类的底层细节，向应用程序提供了遍历 <code>Collection</code> 集合元素的统一编程接口。 <code>Iterator</code> 接口里定义了如下 4 个方法：</p> <table><thead><tr><th>方法</th> <th>解释</th></tr></thead> <tbody><tr><td><code>boolean hasNext()</code></td> <td>如果被迭代的集合元素还没被遍历完，则返回 <code>true</code></td></tr> <tr><td><code>Object next()</code></td> <td>返回集合里的下一个元素</td></tr> <tr><td><code>void remove()</code></td> <td>删除集合里上一次 <code>next</code> 方法返回的元素</td></tr> <tr><td><code>void forEachRemaining(Consumer action)</code></td> <td>Java 8 为 <code>Iterator</code> 新增的默认方法，可使用 Lambda 表达式来遍历集合元素</td></tr></tbody></table> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">IteratorTest</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Collection</span> books <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    books<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    books<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    books<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;c&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 获取 books 集合对应的迭代器</span>
    <span class="token class-name">Iterator</span> it <span class="token operator">=</span> books<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 【1】</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token comment">// next 方法返回的数据类型是 Object 类型，因此需要强制类型转换</span>
      <span class="token class-name">String</span> book <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>book<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        it<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>books<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 【2】 使用 Lambda 表达式遍历 Iterator</span>
    it<span class="token punctuation">.</span><span class="token function">forEachRemaining</span><span class="token punctuation">(</span>obj <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 【3】 使用 foreach 循环遍历集合元素</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> obj <span class="token operator">:</span> books<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h2 id="set-集合"><a href="#set-集合" class="header-anchor">#</a> Set 集合</h2> <p><code>Set</code> 集合类似于一个罐子，程序把多个对象“丢进” <code>Set</code> 集合，而 <code>Set</code> 集合不会记住元素的添加顺序。实际上 <code>Set</code> 就是 <code>Collection</code> ，只是行为略有不同（ <code>Set</code> 不允许包含重复元素）。基于 <code>Set</code> 有三个实现类： <code>HashSet</code> 、 <code>TreeSet</code> 和 <code>EnumSet</code> 。</p> <p><code>Set</code> 既然称为集合，顾名思义， <strong>其不允许包含相同的元素</strong> 。</p> <h3 id="hashset-类"><a href="#hashset-类" class="header-anchor">#</a> HashSet 类</h3> <p><code>HashSet</code> 是 <code>Set</code> 接口的典型实现，大多数时候使用 <code>Set</code> 时就是使用这个实现类。 <code>HashSet</code> 按哈希算法来存储集合中的元素，因此具有很好的存取和查找性能。</p> <p>当向 <code>HashSet</code> 集合中存入一个元素时， <code>HashSet</code> 会调用该对象的 <code>hashCode()</code> 方法来得到该对象的 <code>hashCode</code> 值，然后根据该 <code>hashCode</code> 值决定该对象在 <code>HashSet</code> 中的存储位置。如果有两个元素通过 <code>equals()</code> 方法比较返回 <code>true</code> ，但它们的 <code>hashCode()</code> 方法返回值不相等， <code>HashSet</code> 将会把它们存储在不同的位置，依然添加成功。也就是说，<strong><code>HashSet</code> 集合判断两个元素相等的标准是两个对象通过 <code>equals()</code> 方法比较相等，并且两个对象的 <code>hashCode()</code> 方法返回值也相等</strong>。</p> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p>所以，这里有一个注意点 ：当把一个对象放入 <code>HashSet</code> 中时，如果需要重写该对象对应类的 <code>equals()</code> 方法，则也应该重写其 <code>hashCode()</code> 方法。规则是：如果两个对象通过 <code>equals()</code> 方法比较返回 <code>true</code> ，这两个对象的 hashCode 值也应该相同。</p> <p>如果两个对象通过 <code>equals()</code> 返回 <code>true</code> ，但这两个对象的 <code>hashCode()</code> 返回不同的 hashCode 值时，这导致 <code>HashSet</code> 把这两个对象保存在哈希表的不同位置，这与 <code>Set</code> 集合的规则冲突了。</p> <p>如果两个对象的 <code>hashCode()</code> 返回的 hashCode 值相同，但通过 <code>equals()</code> 返回 <code>false</code> 时，则更麻烦。因为这两个对象的 hashCode 值相同， <code>HashSet</code> 试图把它们保存在同一个位置，但又会造成冲突，所以会在这个位置用链式结构来保存多个对象，将会导致性能下降。</p></div> <details class="custom-block details"><summary>提问：hashCode() 方法对于 HashSet 是不是十分重要？</summary> <p><strong>哈希算法的功能是，它能保证快速查找被检索的对象</strong> ，哈希算法的价值在于速度。当需要查询集合中某个元素时，哈希算法可以直接根据该元素的 hashCode 值计算出该元素的存储位置，从而快速定位该元素。</p> <p>当程序向 <code>HashSet</code> 集合中添加元素时， <code>HashSet</code> 会根据该元素的 hashCode 值来计算它的存储位置，这样也可快速定位该元素。</p> <p>当从 <code>HashSet</code> 中访问元素时， <code>HashSet</code> 先计算该元素的 hashCode 值（也就是调用该对象的 <code>hashCode()</code> 方法的返回值），然后直接到该 hashCode 值对应的位置去取出该元素——这就是 <code>HashSet</code> 速度很快的原因。</p></details> <h3 id="treeset-类"><a href="#treeset-类" class="header-anchor">#</a> TreeSet 类</h3> <p><code>TreeSet</code> 是 <code>SortedSet</code> 接口的实现类，正如 <code>SortedSet</code> 名字所暗示的， <code>TreeSet</code> 可以确保集合元素处于排序状态。</p> <p><code>TreeSet</code> 是根据元素实际值的大小来进行排序的。与 <code>HashSet</code> 集合采用哈希算法来决定元素的存储位置不同， <strong><code>TreeSet</code> 采用红黑树的数据结构来存储集合元素</strong> 。 <code>TreeSet</code> 支持两种排序方法：自然排序（默认）和定制排序。</p> <ol><li>自然排序</li></ol> <p><code>TreeSet</code> 会调用集合元素的 <code>compareTo(Object obj)</code> 方法来比较元素之间的大小关系，然后将集合元素按升序排列，这种方式就是自然排序。</p> <ol start="2"><li>定制排序</li></ol> <p>自然排序只能根据集合元素的大小将它们进行升序排序。如果需要降序或者按照自己的规则进行排序，则需要定制排序。</p> <p>定制排序需要在创建 <code>TreeSet</code> 集合对象时，提供一个 <code>Comparator</code> 对象与该 <code>TreeSet</code> 集合关联，由该 <code>Comparator</code> 对象负责集合元素的排序逻辑。由于 <code>Comparator</code> 是一个函数式接口，因此可使用 Lambda 表达式来代替 <code>Comparator</code> 对象。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">M</span> <span class="token punctuation">{</span>
  <span class="token keyword">int</span> age<span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name">M</span><span class="token punctuation">(</span><span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TreeSetTest</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 按照年龄降序排序</span>
    <span class="token comment">// 此处 Lambda 表达式的目标类型是 Comparator</span>
    <span class="token class-name">TreeSet</span> ts <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeSet</span><span class="token punctuation">(</span><span class="token punctuation">(</span>o1<span class="token punctuation">,</span> o2<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
      <span class="token class-name">M</span> m1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">M</span><span class="token punctuation">)</span>o1<span class="token punctuation">;</span>
      <span class="token class-name">M</span> m2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">M</span><span class="token punctuation">)</span>o2<span class="token punctuation">;</span>
      <span class="token comment">// 根据 M 对象的 age 属性来决定大小， age 越大， M 对象反而越小</span>
      <span class="token keyword">return</span> m1<span class="token punctuation">.</span>age <span class="token operator">&gt;</span> m2<span class="token punctuation">.</span>age <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> <span class="token punctuation">(</span>m1<span class="token punctuation">.</span>age <span class="token operator">&lt;</span> m2<span class="token punctuation">.</span>age <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p><code>TreeSet</code> 判断两个集合元素相等的标准是：通过 <code>Comparator</code> 或 Lambda 表达式比较两个元素返回了 0 ，这样 <code>TreeSet</code> 不会把第二个元素添加到集合中。</p> <h3 id="各-set-实现类的性能分析"><a href="#各-set-实现类的性能分析" class="header-anchor">#</a> 各 Set 实现类的性能分析</h3> <div class="custom-block danger"><p class="custom-block-title">DANGER</p> <p>必须指出的是，<code>Set</code> 的三个实现类都是线程不安全的。如果有多个线程同时访问一个 <code>Set</code> 集合，并且有超过一个线程修改了该 <code>Set</code> 集合，则必须手动保证该 <code>Set</code> 集合的同步性。</p> <p>通常可以通过 Collections 工具类的 <code>synchronizedSortedSet</code> 方法来“包装”该 <code>Set</code> 集合。此操作最好在创建时进行，以防止对 <code>Set</code> 集合的意外非同步访问。</p></div> <h1 id="注解-annotation"><a href="#注解-annotation" class="header-anchor">#</a> 注解（Annotation）</h1> <p>从 JDK 5 开始，Java 增加了对元数据（MeteData）的支持，也就是 Annotation 。注解是代码里的特殊标记，这些标记可以在编译、类加载、运行时被读取，并执行相应的处理。通过使用注解，开发人员可以在不改变原有逻辑的情况下，在源文件中嵌入一些补充的信息。</p> <h2 id="基本注解"><a href="#基本注解" class="header-anchor">#</a> 基本注解</h2> <p>Java 提供了 5 个基本注解的用法，使用注解时要在其前面增加 <code>@</code> 符号，并把该注解当成一个修饰符使用，用于修饰它支持的程序元素。</p> <ul><li><code>@Override</code></li> <li><code>@Deprecated</code></li> <li><code>@SuppressWarnings</code></li> <li><code>@SafeVarags</code>           （Java 7 新增）</li> <li><code>@FunctionalInterface</code>  （Java 8 新增）</li></ul> <p>这 5 个基本注解都定义在 <code>java.lang</code> 包。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/blog/java/java_project.html">
        项目
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/blog/assets/js/app.04d1c14b.js" defer></script><script src="/blog/assets/js/2.37055818.js" defer></script><script src="/blog/assets/js/29.9594dc2d.js" defer></script><script src="/blog/assets/js/3.22df5610.js" defer></script>
  </body>
</html>
