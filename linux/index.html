<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Linux常用命令 | Zenbu Space</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/blog/assets/img/favicon.ico">
    <meta name="description" content="属于Zenbu的个人博客，持续记录对技术的讲解和梳理学习的知识">
    
    <link rel="preload" href="/blog/assets/css/0.styles.1ccea0a9.css" as="style"><link rel="preload" href="/blog/assets/js/app.04d1c14b.js" as="script"><link rel="preload" href="/blog/assets/js/2.37055818.js" as="script"><link rel="preload" href="/blog/assets/js/34.39155ca1.js" as="script"><link rel="preload" href="/blog/assets/js/3.22df5610.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.8c28c3ea.js"><link rel="prefetch" href="/blog/assets/js/11.89a29c07.js"><link rel="prefetch" href="/blog/assets/js/12.13ede5f4.js"><link rel="prefetch" href="/blog/assets/js/13.d5d0de46.js"><link rel="prefetch" href="/blog/assets/js/14.1e04eecd.js"><link rel="prefetch" href="/blog/assets/js/15.3002afa4.js"><link rel="prefetch" href="/blog/assets/js/16.4c1241e8.js"><link rel="prefetch" href="/blog/assets/js/17.0be426b3.js"><link rel="prefetch" href="/blog/assets/js/18.93db46e0.js"><link rel="prefetch" href="/blog/assets/js/19.741f53ac.js"><link rel="prefetch" href="/blog/assets/js/20.1503f3f0.js"><link rel="prefetch" href="/blog/assets/js/21.505cb8eb.js"><link rel="prefetch" href="/blog/assets/js/22.f76a715d.js"><link rel="prefetch" href="/blog/assets/js/23.5ffa7b6d.js"><link rel="prefetch" href="/blog/assets/js/24.12e44cd3.js"><link rel="prefetch" href="/blog/assets/js/25.54e00b4c.js"><link rel="prefetch" href="/blog/assets/js/26.9fdda262.js"><link rel="prefetch" href="/blog/assets/js/27.c1a06b9a.js"><link rel="prefetch" href="/blog/assets/js/28.37711cbc.js"><link rel="prefetch" href="/blog/assets/js/29.9594dc2d.js"><link rel="prefetch" href="/blog/assets/js/30.03c38711.js"><link rel="prefetch" href="/blog/assets/js/31.c9e6a769.js"><link rel="prefetch" href="/blog/assets/js/32.ec8f742a.js"><link rel="prefetch" href="/blog/assets/js/33.7d1040a5.js"><link rel="prefetch" href="/blog/assets/js/35.dd26ac2a.js"><link rel="prefetch" href="/blog/assets/js/36.75451d46.js"><link rel="prefetch" href="/blog/assets/js/37.67f68d98.js"><link rel="prefetch" href="/blog/assets/js/38.a2be9b35.js"><link rel="prefetch" href="/blog/assets/js/39.ad81ed6f.js"><link rel="prefetch" href="/blog/assets/js/4.f766401c.js"><link rel="prefetch" href="/blog/assets/js/40.25a142c4.js"><link rel="prefetch" href="/blog/assets/js/41.f23d29a8.js"><link rel="prefetch" href="/blog/assets/js/42.b65084f3.js"><link rel="prefetch" href="/blog/assets/js/43.4984eac1.js"><link rel="prefetch" href="/blog/assets/js/44.bd527c0d.js"><link rel="prefetch" href="/blog/assets/js/45.37c2094d.js"><link rel="prefetch" href="/blog/assets/js/46.34e7bce6.js"><link rel="prefetch" href="/blog/assets/js/47.ddb1f1b5.js"><link rel="prefetch" href="/blog/assets/js/48.d8b50953.js"><link rel="prefetch" href="/blog/assets/js/5.b9444ef6.js"><link rel="prefetch" href="/blog/assets/js/6.bc5ed194.js"><link rel="prefetch" href="/blog/assets/js/7.17928ded.js"><link rel="prefetch" href="/blog/assets/js/8.bf4d5cdf.js"><link rel="prefetch" href="/blog/assets/js/9.023c1000.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.1ccea0a9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar tech-page"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/assets/img/logo.png" alt="Zenbu Space" class="logo"> <span class="site-name can-hide">Zenbu Space</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/blog/about.html" class="nav-link">
  About
</a></div><div class="nav-item"><a href="/blog/cpp/" class="nav-link">
  C++
</a></div><div class="nav-item"><a href="/blog/java/" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/blog/mark_md.html" class="nav-link">
  Markdown
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Liberary Menu" class="dropdown-title"><span class="title">Liberary</span> <span class="arrow down"></span></button> <button type="button" aria-label="Liberary Menu" class="mobile-dropdown-title"><span class="title">Liberary</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/proletarian/" class="nav-link">
  阅读
</a></li><li class="dropdown-item"><!----> <a href="/blog/resource.html" class="nav-link">
  资源
</a></li></ul></div></div> <a href="https://github.com/DishuZ/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/blog/about.html" class="nav-link">
  About
</a></div><div class="nav-item"><a href="/blog/cpp/" class="nav-link">
  C++
</a></div><div class="nav-item"><a href="/blog/java/" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/blog/mark_md.html" class="nav-link">
  Markdown
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Liberary Menu" class="dropdown-title"><span class="title">Liberary</span> <span class="arrow down"></span></button> <button type="button" aria-label="Liberary Menu" class="mobile-dropdown-title"><span class="title">Liberary</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/proletarian/" class="nav-link">
  阅读
</a></li><li class="dropdown-item"><!----> <a href="/blog/resource.html" class="nav-link">
  资源
</a></li></ul></div></div> <a href="https://github.com/DishuZ/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><div><div><ul id="tag-ul"><li><span>Linux</span></li><li><span>常用命令</span></li></ul></div></div> <hr> <h1 id="linux常用命令"><a href="#linux常用命令" class="header-anchor">#</a> Linux常用命令</h1> <h2 id="快捷使用"><a href="#快捷使用" class="header-anchor">#</a> 快捷使用</h2> <ul><li>[<a href="https://www.runoob.com/note/48437" target="_blank" rel="noopener noreferrer">点击原文<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>] 从当前目录开始查找所有扩展名为 <code>.txt</code> 的文本文件，并找出包含 &quot;text&quot; 的行：</li></ul> <p><code>find ./ -name &quot;*.txt&quot; | xargs grep &quot;text&quot;</code></p> <ul><li>[<a href="https://blog.csdn.net/qq_45547688/article/details/130974190" target="_blank" rel="noopener noreferrer">点击原文<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>] <code>scp</code> <ul><li>本地文件复制到远程：</li></ul></li></ul> <p><code>scp /root/data/*.txt root@192.168.1.106:/home/test</code></p> <ul><li>远程文件（端口号5122）复制到本地：</li></ul> <p><code>scp -P 5122 root@192.168.1.106:/home/test/*.txt /root</code></p> <ul><li>本地文件夹复制到远程：</li></ul> <p><code>scp -r /root/data root@192.168.1.106:/home/test</code></p> <ul><li>[<a href="https://pythonjishu.com/linux-jobs/" target="_blank" rel="noopener noreferrer">点击原文<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>] <code>jobs</code>切换后台作业到前台：</li></ul> <p><code>fg %1</code></p> <ul><li>[<a href="https://developer.aliyun.com/article/383876" target="_blank" rel="noopener noreferrer">点击原文<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>] <code>du</code> 查看文件夹大小</li></ul> <p><code>du -h --max-depth=1 ./project/</code></p> <ul><li><p>查看新系统端口 IP：<code>ip addr show</code> or <code>ifconfig</code> or <code>ip -4 a</code></p></li> <li><p>给普通用户sudo权限【<a href="https://www.zhihu.com/question/555361091/answer/3206285557?utm_id=0" target="_blank" rel="noopener noreferrer">参考1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，<a href="https://www.cnblogs.com/bdicaprio/articles/9845002.html" target="_blank" rel="noopener noreferrer">参考2<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>】</p> <ul><li>查看当前用户所属组：<code>groups</code> （显示的每个组用空格隔开）</li> <li>添加用户到sudo组：<code>vim /etc/group</code> 找到相应组行，添加用户名即可</li></ul></li></ul> <h2 id="问题"><a href="#问题" class="header-anchor">#</a> 问题</h2> <h3 id="ubuntu-忘记-root-密码"><a href="#ubuntu-忘记-root-密码" class="header-anchor">#</a> Ubuntu 忘记 root 密码</h3> <p>忘记 root 密码有两种情况，</p> <ul><li>一种是在安装系统后未设置 root 密码，此时可以直接使用命令 <code>su passwd</code>来设置 root 密码；</li> <li>第二种就是设置了密码但已经忘记了，这个时候只能通过开机进入到 recovery mode 来重新设置 root 密码。</li></ul> <p>那么，<strong>针对第二种</strong>情况，开始解决：</p> <p><strong>1.1 开机</strong></p> <p>开机过程中后进入到 GNU GRUB 界面（有的机器要按住 <code>shift</code>来打开加载 GRUB 的启动界面），这个界面中有好几个选项，选择 <em>Advanced options for Ubuntu</em> 。</p> <p><strong>1.2 设置 recovery mode</strong></p> <p>进入到 _Advanced options for Ubuntu _后，会发现很多选项带有 (recovery mode) 。任选一个，将光标放在其上，但不要回车选择！接着，按 <code>e</code> 进入该选项的编辑命令行，如下图。</p> <p><img src="https://cdn.nlark.com/yuque/0/2023/png/34297766/1700044494017-f08cce32-eded-4e4e-b6d4-2c9ef7b7547e.png#averageHue=%230b0b0b&amp;clientId=u4fb61e17-b15d-4&amp;from=paste&amp;height=529&amp;id=ub921b446&amp;originHeight=626&amp;originWidth=883&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=true&amp;size=26842&amp;status=done&amp;style=none&amp;taskId=u7d780443-33ec-40c0-aa4f-cbcaf23e1a2&amp;title=VMWare 虚拟机 Ubuntu 22.4.2 开机界面&amp;width=746.390625" alt="VMWare 虚拟机 Ubuntu 22.4.2 开机界面" title="VMWare 虚拟机 Ubuntu 22.4.2 开机界面"></p> <p><img src="https://cdn.nlark.com/yuque/0/2023/png/34297766/1700048340340-a15daedd-61a4-4a25-8055-867708f18eb0.png#averageHue=%23393939&amp;clientId=u0d31a7d8-3591-4&amp;from=paste&amp;height=435&amp;id=u2c06e034&amp;originHeight=435&amp;originWidth=736&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=true&amp;size=10267&amp;status=done&amp;style=none&amp;taskId=u824f0542-78b3-4391-9f1b-e5aabd7aa39&amp;title=Shift 进入 Recovery mode 后，选择 'root ....' ，出现如图画面&amp;width=736" alt="Shift 进入 Recovery mode 后，选择 'root ....' ，出现如图画面" title="Shift 进入 Recovery mode 后，选择 'root ....' ，出现如图画面"></p> <p><strong>/etc/fstab</strong> 文件的用处：<a href="https://blog.csdn.net/weixin_45264425/article/details/126963781" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/weixin_45264425/article/details/126963781<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><strong>Ubuntu 忘记密码</strong> 的一些操作：<a href="https://www.jianshu.com/p/c24c52629bc3" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/c24c52629bc3<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><strong>Ubuntu 启动模式介绍</strong>：<a href="https://blog.csdn.net/HandsomeHong/article/details/133950449" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/HandsomeHong/article/details/133950449<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="ubuntu-开机显示-you-are-in-emergency-mode-give-root-password-for-maintenance"><a href="#ubuntu-开机显示-you-are-in-emergency-mode-give-root-password-for-maintenance" class="header-anchor">#</a> Ubuntu 开机显示&quot;You are in emergency mode ... Give root password for maintenance&quot;</h3> <p>这里首先要解决的问题登录 root 账号，若忘记密码了请参考问题1。</p> <p>可以使用 root 密码后，重新开机，查看开机加载日志，中间会出现一个红色的[FAILED]，发现是系统挂载失败，接着就想办法进入Ubuntu系统里寻找挂载失败的原因。</p> <p><img src="https://cdn.nlark.com/yuque/0/2023/png/34297766/1700882823360-dcb6b5a6-af4a-4022-9c01-139b6ddc1758.png#averageHue=%23464856&amp;clientId=u4b90ff00-61bf-4&amp;from=paste&amp;height=430&amp;id=u4898db8f&amp;originHeight=537&amp;originWidth=764&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=true&amp;size=475945&amp;status=done&amp;style=none&amp;taskId=u9556a1c0-c5f2-4e25-b2cb-ec4293c5344&amp;title=显示 %2FData 目录挂载失败&amp;width=611.2" alt="显示 /Data 目录挂载失败" title="显示 /Data 目录挂载失败"></p> <p>...</p> <p>发现是硬盘类型设置错误（这可能是在对硬盘分卷挂载时写错了）</p> <h3 id="重装系统-ubuntu-server-22-04-lts"><a href="#重装系统-ubuntu-server-22-04-lts" class="header-anchor">#</a> 重装系统 Ubuntu Server 22.04 LTS</h3> <p><strong>第一步：制作启动盘</strong></p> <ul><li>参考：<a href="https://blog.csdn.net/weixin_49504861/article/details/129343398" target="_blank" rel="noopener noreferrer">制作Ubuntu启动盘并安装ros的学习笔记_ubuntu做启动盘-CSDN博客<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>首先去 Ubuntu 官网（<a href="https://ubuntu.com/download/server" target="_blank" rel="noopener noreferrer">https://ubuntu.com/download/server<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>）下载镜像，这里我选择下载的是 Ubuntu Server 22.04.2 LTS。</p> <p><img src="https://cdn.nlark.com/yuque/0/2023/png/34297766/1701054418412-40a6f29a-d90a-4739-8def-801350757a44.png#averageHue=%23fafaf9&amp;clientId=u4b90ff00-61bf-4&amp;from=paste&amp;height=562&amp;id=u613e887a&amp;originHeight=703&amp;originWidth=1544&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=true&amp;size=176945&amp;status=done&amp;style=none&amp;taskId=u30e8e627-7549-4944-acca-f669a4f493d&amp;title=我这里下载的是 Ubuntu Server 22.04.2 LTS&amp;width=1235.2" alt="我这里下载的是 Ubuntu Server 22.04.2 LTS" title="我这里下载的是 Ubuntu Server 22.04.2 LTS"></p> <p>接着，需要准备一个U盘（最好是未使用的空U盘），我们要把 Ubuntu .iso文件通过工具刻录到U盘里，做成启动盘。启动盘可以为后续重装系统提供安装引导。</p> <p>在这里，刻录工具选择 Rufus （<a href="https://rufus.ie/zh/" target="_blank" rel="noopener noreferrer">https://rufus.ie/zh/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，下载即用）。先插好U盘，再打开该工具，然后点击“选择”确定你的系统 iso 文件，这样基本准备好了。需要注意的是分区类型，有些旧机子用的是 MBR，而新机子用的是 GPT，根据自己机子的类型来选择（刚开始我装的是 GPT 发现不支持，后面重新烧录改成 MBR ）。然后点击“开始”就可以烧录了，点击后会让你格式化U盘也一并确认。</p> <p><img src="https://cdn.nlark.com/yuque/0/2023/png/34297766/1701312872914-0b96b74c-fc2b-4835-a1af-65bb5c64cfc0.png#averageHue=%23e6e6e5&amp;clientId=u144c34b7-de5c-4&amp;from=paste&amp;height=603&amp;id=XBKZJ&amp;originHeight=754&amp;originWidth=478&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=true&amp;size=39801&amp;status=done&amp;style=none&amp;taskId=u800c8b99-6045-49aa-838d-da58ef7e633&amp;title=Rufus 工具使用界面&amp;width=382.4" alt="Rufus 工具使用界面" title="Rufus 工具使用界面"></p> <p><img src="https://cdn.nlark.com/yuque/0/2024/png/34297766/1710477261238-bd4f0ee8-b639-4aa1-a37e-cc7a64c0d5b7.png#averageHue=%23e5e4e4&amp;clientId=uc91407c5-2b20-4&amp;from=paste&amp;height=580&amp;id=ue0c85d7b&amp;originHeight=580&amp;originWidth=418&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=true&amp;size=33608&amp;status=done&amp;style=none&amp;taskId=u21f477b2-6662-4541-8298-c9210b87036&amp;title=Rufus 工具使用界面 - 烧录 Ubuntu 22.04&amp;width=418" alt="Rufus 工具使用界面 - 烧录 Ubuntu 22.04" title="Rufus 工具使用界面 - 烧录 Ubuntu 22.04"></p> <p>最后，制作启动盘成功后，就可以把U盘取出来使用了。</p> <p><strong>第二步：启动主机并开始安装</strong></p> <ul><li>参考1：<a href="https://www.11343.com/2527.html" target="_blank" rel="noopener noreferrer">Ubuntu 22.04 Server 系统安装图文教程 - 兔子教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>参考2：<a href="https://gpu.xuandashi.com/71574.html" target="_blank" rel="noopener noreferrer">ubuntu20.04安装教程分区(ubuntuserver2004安装教程)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>现在就要到主机的物理位置地点，把U盘插到主机的USB口上，然后启动机子。如果主机的启动优先项已经是U盘优先，那么这里在启动过程中就会直接进入到GNU GRUB界面或者Ubuntu安装界面，如下图所示。</p> <p><img src="https://cdn.nlark.com/yuque/0/2023/png/34297766/1701314052675-8139964b-d8f0-4249-b9a6-3c70e87af237.png#averageHue=%230d0d0d&amp;clientId=u144c34b7-de5c-4&amp;from=paste&amp;height=359&amp;id=u40084ad1&amp;originHeight=449&amp;originWidth=881&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=true&amp;size=24879&amp;status=done&amp;style=none&amp;taskId=u919442b3-e24d-4b8e-bbfb-bfd3db4cd60&amp;title=GNU GRUB界面，这里一个多引导装载程序，即计算机启动时运行的软件程序。选择第一项“Try or Install Ubuntu Server”即可进入到Ubuntu安装界面&amp;width=704.8" alt="GNU GRUB界面，这里一个多引导装载程序，即计算机启动时运行的软件程序。选择第一项“Try or Install Ubuntu Server”即可进入到Ubuntu安装界面" title="GNU GRUB界面，这里一个多引导装载程序，即计算机启动时运行的软件程序。选择第一项“Try or Install Ubuntu Server”即可进入到Ubuntu安装界面"><img src="https://cdn.nlark.com/yuque/0/2023/png/34297766/1701314215110-c2773d91-b190-431d-8b48-e7ef79d7c3cf.png#averageHue=%23231916&amp;clientId=u144c34b7-de5c-4&amp;from=paste&amp;height=439&amp;id=zl5dC&amp;originHeight=607&amp;originWidth=982&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=true&amp;size=40710&amp;status=done&amp;style=none&amp;taskId=u9d4dda85-a84e-4381-a4c3-9190d04c7ea&amp;title=Ubuntu安装界面，选择语言&amp;width=710" alt="Ubuntu安装界面，选择语言" title="Ubuntu安装界面，选择语言"></p> <p>后面的步骤就是按照_参考1_来操作，直到最后两个步骤“存储配置”和“个人资料”，按照自己的实际情况填写。“存储配置”即分区，可以根据参考2来自己分。</p> <p>完成最后两个步骤后，系统开始进行配置，最后会告诉你 <code>subiquity/Late/run</code>（不确定是不是大家都是这个样子，这里给出的是我的参考）表示安装完成，如下图所示。选择 “Reboot Now”重启计算机，点击之后接着会提示你拔出U盘，此时再拔出，并且让电脑连网（插网线），这样就顺利安装完成了！</p> <p><img src="https://cdn.nlark.com/yuque/0/2023/jpeg/34297766/1701347411830-c469f121-5d68-4c15-bd31-5cfa445e68a5.jpeg#averageHue=%233c4463&amp;clientId=uf7ca8eb4-ce0f-4&amp;from=paste&amp;height=1786&amp;id=ua4710720&amp;originHeight=2232&amp;originWidth=3968&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=true&amp;size=1849909&amp;status=done&amp;style=none&amp;taskId=u1b7e4aa2-767d-47b0-9409-f464f099108&amp;title=选择“Reboot Now”，此时还不要拔出U盘&amp;width=3174.4" alt="选择“Reboot Now”，此时还不要拔出U盘" title="选择“Reboot Now”，此时还不要拔出U盘"></p> <h4 id="遇到的问题"><a href="#遇到的问题" class="header-anchor">#</a> 遇到的问题</h4> <p>（1）<code>finish: cmd-in-target: FAIL: curtin command in-target</code></p> <p>这里我操作了好几台机子，在分区后就 error ，还不清楚怎么解决这个问题，错误报告放在下面。</p> <p><img src="https://cdn.nlark.com/yuque/0/2023/jpeg/34297766/1701320255363-8419f9b2-38a3-4afe-8733-3f36158a6530.jpeg#averageHue=%232d3130&amp;clientId=u144c34b7-de5c-4&amp;from=paste&amp;height=1786&amp;id=u9bc8081d&amp;originHeight=2232&amp;originWidth=3968&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=true&amp;size=2972670&amp;status=done&amp;style=none&amp;taskId=uc3d851fb-7f45-4488-9b4a-8e23b45fdcb&amp;title=错误报告&amp;width=3174.4" alt="错误报告" title="错误报告"></p> <p><img src="https://cdn.nlark.com/yuque/0/2023/jpeg/34297766/1701320454014-a761e735-43ad-4063-b3b7-b327953dc83a.jpeg#averageHue=%239ba2a4&amp;clientId=u144c34b7-de5c-4&amp;from=paste&amp;height=1786&amp;id=u5cabd7ce&amp;originHeight=2232&amp;originWidth=3968&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=true&amp;size=3684281&amp;status=done&amp;style=none&amp;taskId=u723d41a7-bb61-4bf3-9cff-a55269bda0b&amp;title=错误报告&amp;width=3174.4" alt="错误报告" title="错误报告"></p> <p>update: 可能原因是在安装时没有断网，参考：<a href="https://www.soinside.com/question/d5NGVP5WwhvX9WYwiYB687" target="_blank" rel="noopener noreferrer">链接<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>在安装系统时不要连网，然后就可以顺利进行下去。</p> <p>（2）<code>media test failure, check cable</code><img src="https://cdn.nlark.com/yuque/0/2023/jpeg/34297766/1701320908178-49123c03-91c9-4837-a851-749a92bf937f.jpeg#averageHue=%233c4668&amp;clientId=u144c34b7-de5c-4&amp;from=paste&amp;height=1786&amp;id=rI2Dz&amp;originHeight=2232&amp;originWidth=3968&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=1863834&amp;status=done&amp;style=none&amp;taskId=uf351ae41-48db-4b8d-bc7b-28b253f2810&amp;title=&amp;width=3174.4" alt="IMG_20231127_203223.jpg"></p> <h3 id="基于-ubuntu-22-04-2-安装显卡-rtx3090-turbo"><a href="#基于-ubuntu-22-04-2-安装显卡-rtx3090-turbo" class="header-anchor">#</a> 基于 Ubuntu 22.04.2 安装显卡 RTX3090 Turbo</h3> <ul><li><a href="https://www.zhihu.com/question/549057574?utm_id=0" target="_blank" rel="noopener noreferrer">电脑显卡如何安装？ - 知乎<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.52q2.com/Ai_a_21958.html" target="_blank" rel="noopener noreferrer">华为服务器p02报警(华为h22h05服务器参数)-吾爱圈<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blog.csdn.net/qq_38574198/article/details/131187547" target="_blank" rel="noopener noreferrer">Ubuntu20.04 + 3090 安装nvidia驱动，附加解决重启黑屏卡在 /dev/***: clean, **files,***blocks的问题_ubuntu启动卡在clean_流觞时光的博客-CSDN博客<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blog.csdn.net/weixin_45989883/article/details/129589739?spm=1001.2101.3001.6650.5&amp;utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-5-129589739-blog-133994095.235%5Ev39%5Epc_relevant_anti_vip&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-5-129589739-blog-133994095.235%5Ev39%5Epc_relevant_anti_vip&amp;utm_relevant_index=7" target="_blank" rel="noopener noreferrer">ubuntu20.04安装Nvidia驱动后黑屏，无法启动系统_ubuntu20装完显卡驱动黑屏_gz_bro的博客-CSDN博客<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blog.csdn.net/weixin_43387480/article/details/131947497" target="_blank" rel="noopener noreferrer">ubuntu查看显卡驱动_ubuntu 查看显卡驱动-CSDN博客<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blog.csdn.net/u012229282/article/details/124442555" target="_blank" rel="noopener noreferrer">Ubuntu20.04 系统禁用自带的Nouveau驱动_ubuntu禁用nouveau_Coder802的博客-CSDN博客<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blog.csdn.net/u012999810/article/details/120757775" target="_blank" rel="noopener noreferrer">每天十分钟--学透linux --（day1:ubuntu的系统启动过程）_linux查看ubuntu启动时,加载的内核映像文件_maintain001的博客-CSDN博客<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blog.csdn.net/weixin_44044411/article/details/132752621" target="_blank" rel="noopener noreferrer">Ubuntu安装NVIDIA显卡驱动（新手教程）_非线性光学元件的博客-CSDN博客<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blog.csdn.net/yezhijing/article/details/131358170" target="_blank" rel="noopener noreferrer">Ubuntu 22 服务器端安装图形化界面_ubuntu图形界面-CSDN博客<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blog.csdn.net/no1xium/article/details/127012204" target="_blank" rel="noopener noreferrer">我把华为云的Ubuntu 18.04升级到了Ubuntu 22.04_ubuntu18升级到22-CSDN博客<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blog.csdn.net/weixin_49777848/article/details/131684172" target="_blank" rel="noopener noreferrer">基于RTX3090的Ubuntu22.04安装cuda11.7和cudnn8.6_3090 cuda版本_@于千的博客-CSDN博客<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blog.csdn.net/weixin_43301333/article/details/121537145" target="_blank" rel="noopener noreferrer">服务器RTX3090安装显卡驱动,cuda,cudnn,gpu版pytorch记录_3090显卡驱动_Reza.的博客-CSDN博客<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zhuanlan.zhihu.com/p/437334513" target="_blank" rel="noopener noreferrer">RTX 3090配置深度学习环境<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blog.csdn.net/cwg213_code/article/details/131395846" target="_blank" rel="noopener noreferrer">Ubuntu 20.04-NVIDIA显卡驱动-安装和卸载-解决黑屏问题_ubuntu卸载显卡驱动_山雨空的博客-CSDN博客<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <hr> <h4 id="物理安装显卡"><a href="#物理安装显卡" class="header-anchor">#</a> 物理安装显卡</h4> <p><strong>（1）拆卸服务器</strong></p> <p>先把运行的服务器关机，然后拔掉电源，确保在安全的情况下装卸服务器。</p> <p>这里使用的是华为服务器，机盖上有个卡扣，可以一键拆卸服务器，看到主板上的部件。</p> <p><strong>（2）更换服务器供电电源</strong></p> <p>最怕后面忘记更换电源，导致服务器运行显卡后功率不足而炸机。所以，最好是第一步就更换电源，保证服务器供电正常。服务器原始使用的电源是360W的，<strong>需要更换成1200W</strong>，一共有两个电源，记得都要更换。</p> <p><img src="https://cdn.nlark.com/yuque/0/2024/jpeg/34297766/1710926703555-b5ceda22-2f50-46db-9797-45407394f120.jpeg#averageHue=%235b6058&amp;clientId=ufc360cdc-3d61-4&amp;from=paste&amp;height=720&amp;id=u6c6801f6&amp;originHeight=720&amp;originWidth=1280&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=true&amp;size=262896&amp;status=done&amp;style=none&amp;taskId=u87ae9edb-a3b2-4996-b6dc-519fcb2eed4&amp;title=左：电源，右：显卡槽&amp;width=1280" alt="左：电源，右：显卡槽" title="左：电源，右：显卡槽"></p> <p><strong>（3）安装显卡</strong></p> <p>显卡插入到显卡槽里，然后通过线连接显卡和卡槽，注意把卡槽端端的卡扣先打开，才能把显卡插进去，最后把卡扣合上，伸展板块也对准位置并拧紧。</p> <p><img src="https://cdn.nlark.com/yuque/0/2024/png/34297766/1710927039537-caae2f2c-00dc-4f10-9139-5f402428acf1.png#averageHue=%23395354&amp;clientId=ufc360cdc-3d61-4&amp;from=paste&amp;height=528&amp;id=uc723e93e&amp;originHeight=1920&amp;originWidth=1080&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=true&amp;size=1573084&amp;status=done&amp;style=none&amp;taskId=u6c7305b5-a8bb-4c16-8bc2-4099ad41ff3&amp;title=显卡&amp;width=297" alt="显卡" title="显卡"></p> <p><strong>（4）验证是否安装成功</strong></p> <p>安装好显卡和电源后，把机盖盖好，并安置在机架上，插上电脑，等待开机。</p> <p>开机后，通过命令 <code>lspci | grep -i nvidia</code> 查看是否识别显卡及显卡型号，比如三号机执行该命令的效果如图所示：</p> <p><img src="https://cdn.nlark.com/yuque/0/2023/png/34297766/1702254753768-5c9ab12e-75f1-4a77-92b1-7f351a3c432e.png#averageHue=%231f1814&amp;clientId=u51be1180-d6cd-4&amp;from=paste&amp;height=87&amp;id=u21b924ab&amp;originHeight=109&amp;originWidth=987&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=true&amp;size=20480&amp;status=done&amp;style=none&amp;taskId=ue011de39-92a0-4e70-95eb-920db32d6c2&amp;title=显示 A5000 显卡，并且有两张&amp;width=789.6" alt="显示 A5000 显卡，并且有两张" title="显示 A5000 显卡，并且有两张"></p> <p>如果无法显示型号的，通常用4位16进制代码表示，例如 <code>1b06</code>，根据该代码，去<a href="http://pci-ids.ucw.cz/mods/PC/10de?action=help?help=pci" target="_blank" rel="noopener noreferrer">PCI Devices<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>网站上查询对应的显卡型号。</p> <p>如果 <code>lspci | grep -i nvidia</code>命令可以查询到刚刚安装的显卡， 表示服务器识别到了显卡，成功安装。</p> <h4 id="重装系统"><a href="#重装系统" class="header-anchor">#</a> 重装系统</h4> <p>这一步可以按照<a href="#cEmzR">问题3</a>的步骤操作。</p> <h4 id="禁用-ubuntu-自带驱动-nouveau"><a href="#禁用-ubuntu-自带驱动-nouveau" class="header-anchor">#</a> 禁用 Ubuntu 自带驱动 nouveau</h4> <p>（1）先<strong>保持内核</strong>。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 一定要保持当前的内核，也就是安装 NVIDIA 驱动时用的内核</span>
<span class="token function">sudo</span> apt-mark hold linux-image-generic linux-headers-generic
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>（2）然后开始禁用自带的开源驱动 nouveau</p> <p>找到路径 <code>/etc/modprobe.d/</code>，在该目录下<strong>创建新文件</strong> <code>blacklist-nouveau.conf</code>，当然可以用一条命令解决：<code>vim /etc/modprobe.d/blacklist-nouveau.conf</code>，在该（空）文件中添加如下信息：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>blacklist nouveau
options nouveau <span class="token assign-left variable">modeset</span><span class="token operator">=</span><span class="token number">0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>（3）更新并验证是否屏蔽 nouveau</p> <p>更新命令：<code>sudo update-initramfs -u</code></p> <p>然后检查是否屏蔽，命令：<code>lsmod | grep nouveau</code>，<strong>如果没有任何输出，表示成功屏蔽</strong>。</p> <blockquote><p>解读 <code>update-initramfs -u</code>命令：<a href="https://www.python100.com/html/OUEK292Y133A.html" target="_blank" rel="noopener noreferrer">https://www.python100.com/html/OUEK292Y133A.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
在执行该命令前后，可以通过 <code>uname -r</code>查看 Linux 内核版本是否更改。</p></blockquote> <p>（4）重启</p> <p>搞定这一切后，重启 <code>reboot</code>，查看是否可以正常开机，然后可以再验证一遍（3）。</p> <h4 id="系统连网"><a href="#系统连网" class="header-anchor">#</a> 系统连网</h4> <p>首先拿到服务器的 IP，通过 <code>ip -4 a</code>或者 <code>ip add show</code>都可以查看到当前 IP。然后在有网络的电脑上，通过 XShell （或其他远程连接软件）连接服务器。</p> <p><img src="https://cdn.nlark.com/yuque/0/2024/png/34297766/1710927284862-f3ad56b1-3322-4e54-ab4f-9032f0a91a62.png#averageHue=%23f4f3f3&amp;clientId=ufc360cdc-3d61-4&amp;from=paste&amp;height=502&amp;id=udab6a59a&amp;originHeight=718&amp;originWidth=512&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=true&amp;size=34624&amp;status=done&amp;style=none&amp;taskId=uf8a71a1c-1de4-4792-a121-bca3acfab97&amp;title=xshell 连接服务器界面&amp;width=358" alt="xshell 连接服务器界面" title="xshell 连接服务器界面"></p> <p><strong>情况1：如果要在线安装 Nvidia 驱动，则先联网</strong></p> <p>把校园网登录脚本 cqupt 传入（顺便把 miniconda 也传入安装了），通过脚本连接网络。</p> <p><strong>情况2：如果离线安装 Nvidia 驱动，可以不联网</strong></p> <p>略</p> <h4 id="安装-nvidai-驱动"><a href="#安装-nvidai-驱动" class="header-anchor">#</a> 安装 Nvidai 驱动</h4> <p><strong>（1）卸载原有驱动</strong></p> <p>如果是重装的系统，应该是不存在 nvidia 驱动的，因此该步骤选做。</p> <p><code>sudo apt-get --purge remove nvidia*</code>卸载已经安装的 Nvidia 驱动</p> <p><strong>（2）更新软件列表</strong></p> <p>首先可以先更新一下软件源 <code>sources.list</code>，这个步骤也可以在重新系统时先设定好。先备份 <code>cp /etc/apt/sources.list /etc/apt/sources.list.bak</code>，然后编辑 <code>vim /etc/apt/sources.list</code>，更换成阿里源/中科大源/清华源其中之一，下面分别为三者的软件源：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 阿里源</span>
deb http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse

<span class="token comment"># 中科大源</span>
deb https://mirrors.ustc.edu.cn/ubuntu/ bionic main restricted universe multiverse
deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic main restricted universe multiverse
deb https://mirrors.ustc.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse
deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse
deb https://mirrors.ustc.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse
deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse
deb https://mirrors.ustc.edu.cn/ubuntu/ bionic-security main restricted universe multiverse
deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-security main restricted universe multiverse
deb https://mirrors.ustc.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse
deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse


<span class="token comment">### 清华源 https://mirror.tuna.tsinghua.edu.cn/help/ubuntu/</span>

<span class="token comment"># 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释</span>
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy main restricted universe multiverse
<span class="token comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy main restricted universe multiverse</span>
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse
<span class="token comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse</span>
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse
<span class="token comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse</span>

deb http://security.ubuntu.com/ubuntu/ jammy-security main restricted universe multiverse
<span class="token comment"># deb-src http://security.ubuntu.com/ubuntu/ jammy-security main restricted universe multiverse</span>

<span class="token comment"># 预发布软件源，不建议启用</span>
<span class="token comment"># deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-proposed main restricted universe multiverse</span>
<span class="token comment"># # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-proposed main restricted universe multiverse</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><p>编辑后保存。</p> <p>然后再更新软件：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> update
<span class="token comment"># 下面这三个不一定要操作</span>
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> g++  
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> gcc
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token function">make</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>三号机上的软件源<img src="https://cdn.nlark.com/yuque/0/2023/png/34297766/1702256164691-474d3797-7d5a-485e-9c4f-72d52073e1d8.png#averageHue=%230f0c0a&amp;clientId=u51be1180-d6cd-4&amp;from=paste&amp;height=758&amp;id=j65Tc&amp;originHeight=948&amp;originWidth=1168&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=115209&amp;status=done&amp;style=none&amp;taskId=u4839ec38-6642-4fcd-a75a-135b7ee9919&amp;title=&amp;width=934.4" alt="image.png"></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># See http://help.ubuntu.com/community/UpgradeNotes for how to upgrade to</span>
<span class="token comment"># newer versions of the distribution.</span>
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu jammy main restricted
<span class="token comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu jammy main restricted</span>

<span class="token comment">## Major bug fix updates produced after the final release of the</span>
<span class="token comment">## distribution.</span>
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu jammy-updates main restricted
<span class="token comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu jammy-updates main restricted</span>

<span class="token comment">## N.B. software from this repository is ENTIRELY UNSUPPORTED by the Ubuntu</span>
<span class="token comment">## team. Also, please note that software in universe WILL NOT receive any</span>
<span class="token comment">## review or updates from the Ubuntu security team.</span>
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu jammy universe
<span class="token comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu jammy universe</span>
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu jammy-updates universe
<span class="token comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu jammy-updates universe</span>

<span class="token comment">## N.B. software from this repository is ENTIRELY UNSUPPORTED by the Ubuntu</span>
<span class="token comment">## team, and may not be under a free licence. Please satisfy yourself as to</span>
<span class="token comment">## your rights to use the software. Also, please note that software in</span>
<span class="token comment">## multiverse WILL NOT receive any review or updates from the Ubuntu</span>
<span class="token comment">## security team.</span>
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu jammy multiverse
<span class="token comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu jammy multiverse</span>
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu jammy-updates multiverse
<span class="token comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu jammy-updates multiverse</span>

<span class="token comment">## N.B. software from this repository may not have been tested as</span>
<span class="token comment">## extensively as that contained in the main release, although it includes</span>
<span class="token comment">## newer versions of some applications which may provide useful features.</span>
<span class="token comment">## Also, please note that software in backports WILL NOT receive any review</span>
<span class="token comment">## or updates from the Ubuntu security team.</span>
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu jammy-backports main restricted universe multiverse
<span class="token comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu jammy-backports main restricted universe multiverse</span>

deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu jammy-security main restricted
<span class="token comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu jammy-security main restricted</span>
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu jammy-security universe
<span class="token comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu jammy-security universe</span>
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu jammy-security multiverse
<span class="token comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu jammy-security multiverse</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><p><strong>（3）查看 Nvidia 驱动版本并安装</strong></p> <p>查看当前服务器属性：<code>ubuntu-drivers devices</code>，这里会显示推荐的驱动版本，标识 <code>recommended</code>，即为合适的驱动。</p> <p>接下来有两种方式安装驱动。</p> <p>方法1：离线安装。在<a href="https://download.nvidia.com/XFree86/Linux-x86_64/" target="_blank" rel="noopener noreferrer">镜像站<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>中找到想要下载的版本，在电脑上下载，然后上传到服务器，再通过如下命令安装：<code>bash NVIDIA-Linux-x86_64-xxx.run</code>，加上参数 <code>--np-opengl-files</code>保证只安装驱动文件。</p> <p>方法2：直接安装。通过命令 <code>sudo apt-get install nvidia-driver-525</code>。</p> <p>安装好之后，也可以执行（也可以不执行，验证失败时再尝试）下面这条指令，表示加载驱动模块：<code>sudo modprobe nvidia</code></p> <p><a href="https://blog.csdn.net/xiao_xian_/article/details/132415898" target="_blank" rel="noopener noreferrer">【error】nvidia-smi无效的解决策略_modprobe: error: could not insert ‘nvidia’: operat-CSDN博客<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><strong>（4）验证安装结果</strong></p> <p>之后用<code>nvidia-smi</code>命令，查看驱动是否安装好。</p> <p><img src="https://cdn.nlark.com/yuque/0/2024/png/34297766/1710927436740-61068568-eb9e-4f81-bc16-18d5af0454f4.png#averageHue=%23080605&amp;clientId=ufc360cdc-3d61-4&amp;from=paste&amp;height=404&amp;id=u4186ea78&amp;originHeight=404&amp;originWidth=727&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=23724&amp;status=done&amp;style=none&amp;taskId=u81aba055-74d9-4ece-90a0-b2afaca1718&amp;title=&amp;width=727" alt="image.png"></p> <hr> <h4 id="系统分盘"><a href="#系统分盘" class="header-anchor">#</a> 系统分盘</h4> <h5 id="整体流程"><a href="#整体流程" class="header-anchor">#</a> 整体流程</h5> <p><img src="https://cdn.nlark.com/yuque/0/2023/webp/34297766/1703254493540-e284e7c5-7bf2-43a1-b26e-91c07504af86.webp#averageHue=%23ccd0d2&amp;clientId=u14dc4586-43d9-4&amp;from=paste&amp;id=udb43ed0f&amp;originHeight=304&amp;originWidth=612&amp;originalType=url&amp;ratio=1.25&amp;rotation=0&amp;showTitle=true&amp;status=done&amp;style=none&amp;taskId=u4ad5ff4e-9950-4fa2-acf5-2f3f4a251c9&amp;title=分盘的整体流程：PV -&gt; VG -&gt; LG -&gt; mount" alt="分盘的整体流程：PV -&gt; VG -&gt; LG -&gt; mount" title="分盘的整体流程：PV -&gt; VG -&gt; LG -&gt; mount"></p> <p>这是未操作前的挂载情况：</p> <p><img src="https://cdn.nlark.com/yuque/0/2023/png/34297766/1703252076237-29f4679a-ddac-489e-aec7-854146054264.png#averageHue=%23090705&amp;clientId=u14dc4586-43d9-4&amp;from=paste&amp;height=169&amp;id=ua88f37e3&amp;originHeight=169&amp;originWidth=742&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=16120&amp;status=done&amp;style=none&amp;taskId=u551b8fc5-d4f3-4ebc-a7e9-db3c9bdfb33&amp;title=&amp;width=742" alt="image.png"></p> <h5 id="创建卷组"><a href="#创建卷组" class="header-anchor">#</a> 创建卷组</h5> <p>创建卷组，卷组情况：</p> <p><img src="https://cdn.nlark.com/yuque/0/2023/png/34297766/1703254128800-5e3107e6-5a36-41bd-8fcf-1e90f69ffcf4.png#averageHue=%230d0906&amp;clientId=u14dc4586-43d9-4&amp;from=paste&amp;height=531&amp;id=ua18f41ee&amp;originHeight=531&amp;originWidth=903&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=true&amp;size=73584&amp;status=done&amp;style=none&amp;taskId=u7b25b420-aa37-40c7-b600-34d4f21f1b6&amp;title=物理卷和卷组的创建过程&amp;width=903" alt="物理卷和卷组的创建过程" title="物理卷和卷组的创建过程"></p> <p><img src="https://cdn.nlark.com/yuque/0/2023/png/34297766/1703254450381-9c8218cb-0255-4a4a-936d-41e6b22b6f1a.png#averageHue=%23050403&amp;clientId=u14dc4586-43d9-4&amp;from=paste&amp;height=899&amp;id=u44e3d3f8&amp;originHeight=899&amp;originWidth=654&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=true&amp;size=54444&amp;status=done&amp;style=none&amp;taskId=u6c14c771-a36e-42d2-86b7-e3693af7892&amp;title=最终的卷组情况&amp;width=654" alt="最终的卷组情况" title="最终的卷组情况"></p> <h5 id="创建逻辑卷-挂载"><a href="#创建逻辑卷-挂载" class="header-anchor">#</a> 创建逻辑卷&amp;挂载</h5> <p><strong>1）从卷组</strong><code>**vg0**</code><strong>中分配空间来创建逻辑卷</strong><code>**lgData**</code>** 和 <strong><code>**lgHome**</code></strong> **</p> <p>创建逻辑卷，逻辑卷情况：</p> <p><img src="https://cdn.nlark.com/yuque/0/2023/png/34297766/1703254832900-818bbc5c-6d70-4e6c-b48f-8717d3832293.png#averageHue=%23110b06&amp;clientId=u14dc4586-43d9-4&amp;from=paste&amp;height=196&amp;id=u1c1f6f6d&amp;originHeight=196&amp;originWidth=1160&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=true&amp;size=40230&amp;status=done&amp;style=none&amp;taskId=u31b0b1a2-2d7f-4fcb-b7ab-498061c3bcb&amp;title=基于卷组 vg0 创建逻辑卷&amp;width=1160" alt="基于卷组 vg0 创建逻辑卷" title="基于卷组 vg0 创建逻辑卷"></p> <p><strong>2）逻辑卷创建好后，需要格式化成 <strong><code>**ext4**</code></strong> ，然后再挂载（</strong><code>**mount**</code><strong>）到目录</strong></p> <p>格式化和挂载：</p> <p><img src="https://cdn.nlark.com/yuque/0/2023/png/34297766/1703255107956-e3778629-302a-4c45-887b-66460fd9fe9e.png#averageHue=%230d0806&amp;clientId=u14dc4586-43d9-4&amp;from=paste&amp;height=528&amp;id=ud9eda0cb&amp;originHeight=528&amp;originWidth=974&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=true&amp;size=67091&amp;status=done&amp;style=none&amp;taskId=ucc8ed54c-12fa-4228-b978-8573d3ea343&amp;title=挂载逻辑卷 lgData 到 %2FData&amp;width=974" alt="挂载逻辑卷 lgData 到 /Data" title="挂载逻辑卷 lgData 到 /Data"></p> <p><img src="https://cdn.nlark.com/yuque/0/2023/png/34297766/1703256135163-7a7cc346-08ef-4258-a7bb-479e82a1de61.png#averageHue=%23070504&amp;clientId=u14dc4586-43d9-4&amp;from=paste&amp;height=1223&amp;id=u99768b8f&amp;originHeight=1223&amp;originWidth=1414&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=true&amp;size=153108&amp;status=done&amp;style=none&amp;taskId=uf8fcb117-2ace-4963-b28c-f4efae75c28&amp;title=挂载逻辑卷 lgHome 到 %2Fhome，需要迂回一下&amp;width=1414" alt="挂载逻辑卷 lgHome 到 /home，需要迂回一下" title="挂载逻辑卷 lgHome 到 /home，需要迂回一下"></p> <h5 id="开机自动挂载"><a href="#开机自动挂载" class="header-anchor">#</a> 开机自动挂载</h5> <p>挂载操作只会在系统运行期间生效，如果系统重启，那么就会失效。因此需要设置一下文件<code>/etc/fstab</code>，使其可以做到开机自动挂载。</p> <p>设置开机自动挂载：</p> <p><img src="https://cdn.nlark.com/yuque/0/2023/png/34297766/1703256313840-11a26d34-2caa-4641-8cd1-557a683496b2.png#averageHue=%23050403&amp;clientId=u14dc4586-43d9-4&amp;from=paste&amp;height=305&amp;id=u555be25b&amp;originHeight=305&amp;originWidth=970&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=true&amp;size=37271&amp;status=done&amp;style=none&amp;taskId=ua023be46-e581-4701-89f3-b930f75f870&amp;title=vim %2Fetc%2Ffstab&amp;width=970" alt="vim /etc/fstab" title="vim /etc/fstab"></p> <p>最终情况：</p> <p><img src="https://cdn.nlark.com/yuque/0/2023/png/34297766/1703256569033-a28c5a6f-d8cd-46e9-b04b-771b5bc85287.png#averageHue=%230b0907&amp;clientId=u14dc4586-43d9-4&amp;from=paste&amp;height=217&amp;id=u4be9d9b3&amp;originHeight=217&amp;originWidth=742&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=22358&amp;status=done&amp;style=none&amp;taskId=ua6596879-e279-4d54-9043-c29ff55d4fe&amp;title=&amp;width=742" alt="image.png"></p> <p>参考：</p> <ul><li><a href="https://blog.csdn.net/weixin_43693967/article/details/128033305" target="_blank" rel="noopener noreferrer">【linux】逻辑卷、lvm2使用、ubuntu将多个硬盘挂载到一个目录_linuxlvm挂载到目录-CSDN博客<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blog.51cto.com/beyang/6037380" target="_blank" rel="noopener noreferrer">ubuntu 的 LVM 逻辑卷_51CTO博客_在ubuntu新安装中使用lvm<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/blog/assets/js/app.04d1c14b.js" defer></script><script src="/blog/assets/js/2.37055818.js" defer></script><script src="/blog/assets/js/34.39155ca1.js" defer></script><script src="/blog/assets/js/3.22df5610.js" defer></script>
  </body>
</html>
